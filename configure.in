
AC_INIT(desktop-properties)

AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(gnome-core, 0.13)

AM_MAINTAINER_MODE

GNOME_INIT

AC_ISC_POSIX
AC_PROG_CC
AC_STDC_HEADERS
AC_ARG_PROGRAM
AM_PROG_LIBTOOL
AC_PROG_CXX
AC_PROG_LEX
AC_DECL_YYTEXT

ALL_LINGUAS=""
AM_GNU_GETTEXT

AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)

dnl properties-keyboard
AC_CHECK_HEADERS(X11/extensions/xf86misc.h, XF86MISC_LIBS="-lXxf86misc")
AC_SUBST(XF86MISC_LIBS)

dnl panel/cdplayer
PROGRAMS_PANEL_CDPLAYER=""
AC_CANONICAL_HOST
case "$host" in
*linux*) CDROM_HOST=linux;;
*solaris*) CDROM_HOST=solaris;;
esac
test -n "$CDROM_HOST" && PROGRAMS_PANEL_CDPLAYER=cdplayer
AC_SUBST(CDROM_HOST)
AC_SUBST(PROGRAMS_PANEL_CDPLAYER)

AC_OUTPUT([
Makefile
po/Makefile.in
panel/Makefile
panel/batmon/Makefile
panel/batmon/Makefile
panel/cdplayer/Makefile
panel/clock/Makefile 
panel/launcher/Makefile
panel/logout/Makefile
panel/mailcheck/Makefile 
panel/menu/Makefile
panel/netwatch/Makefile
desktop-links/Makefile
desktop-properties/Makefile
pixmaps/Makefile
gsm/Makefile
intl/Makefile
version.h
stamp.h],[sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile])
