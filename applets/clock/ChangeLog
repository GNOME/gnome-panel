==================== 2.26.1 ====================

==================== 2.26.0 ====================

2009-03-09  Vincent Untz  <vuntz@gnome.org>

	* calendar-client.c: (get_ical_rid): strdup the string returned by
	libical, else we'll free it twice.

==================== 2.25.92 ====================

2009-02-26  Vincent Untz  <vuntz@gnome.org>

	* clock-location-tile.c: (make_current_cb):
	* clock-utils.c: (clock_utils_display_help):
	* clock.c: (try_config_tool), (set_time_callback), (config_date):
	Use close button instead of ok button in error dialogs.

==================== 2.25.91 ====================

2009-02-17  Vincent Untz  <vuntz@gnome.org>

	Kill OBox since GtkBox now supports changing the orientation.
	Patch by Christian Persch <chpe@gnome.org>.
	Fix bug #571042.

	* Makefile.am: remove obox.[ch]
	* obox.[ch]: killed
	* clock.c: (clock_box_init), (clock_box_class_init): add an
	instantiable GtkBox type
	(create_clock_widget), (applet_change_orient): use GtkBox methods.

2009-02-10  Matthias Clasen  <mclasen@redhat.com>

	* clock.glade: Fix two small oversights/regressions. There should
	not be a visible missing image at the to of the edit location dialog,
	and it should have an empty window title.

==================== 2.25.90 ====================

2009-01-27  Vincent Untz  <vuntz@gnome.org>

	Properly initialize the eds part handling passwords.
	This fixes some issues with the clock hanging.
	https://bugzilla.novell.com/show_bug.cgi?id=440866 for example
	Thanks to Simon Brys <sbrys@novell.com> for debugging and finding the
	fix.

	* clock.c: (create_clock_widget): call e_passwords_init()
	(destroy_clock): call e_passwords_shutdown() when the last clock is
	destroyed.

2009-01-27  Vincent Untz  <vuntz@gnome.org>

	* org.gnome.ClockApplet.Mechanism.conf: allow the destination (and
	implying therefore all interfaces on this destination) instead of a
	non-existing interface...

2009-01-21  Frederic Crozat  <fcrozat@mandriva.com>

	* clock-location-tile.c:
	* clock.c:
	* gnome-clock-applet-mechanism.c: fix
	format security warning.

==================== 2.25.5.1 ====================

==================== 2.25.5 ====================

2009-01-20  Vincent Untz  <vuntz@gnome.org>

	* clock.glade: correctly position the Time label in the set system time
	dialog

2009-01-08  Vincent Untz  <vuntz@gnome.org>

	* clock-location.c: (clock_location_new): use
	clock_location_get_valid_weather_code()
	(clock_location_get_valid_weather_code): new, to use "-" for empty code
	(clock_location_set_weather_code): use
	clock_location_get_valid_weather_code()
	(setup_weather_updates): update to use WEATHER_EMPTY_CODE
	Fix bug #560200 (crash on Solaris when the weather code is empty)

2009-01-08  Vincent Untz  <vuntz@gnome.org>

	* clock-utils.[ch]: (clock_locale_supports_am_pm): new
	(clock_locale_format): use clock_locale_supports_am_pm
	* clock.c: (ensure_prefs_window_is_created): hide the options to use 12
	or 24 hour format if there's no AM/PM string.
	* clock.glade: name a widget

2009-01-07  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: add LIBPANEL_APPLET_LIBS to LDADD since we don't really
	use the libpanel-applet pkg-config file. Fix build issue with
	"-Wl,-z,defs".

==================== 2.25.3 ====================

2008-12-13  Vincent Untz  <vuntz@gnome.org>

	* clock.glade: show day of week header in "set time" calendar
	Fix bug #564407.

2008-12-11  Vincent Untz  <vuntz@gnome.org>

	* clock-utils.[ch]: (clock_utils_display_help): get rid of
	gnome_help_display_desktop_on_screen(), and improve code
	* clock.c: (prefs_help), (display_help_dialog): trivial update

2008-12-09  Vincent Untz  <vuntz@gnome.org>

	* obox.[ch]: (clock_obox_finalize), (clock_obox_class_init),
	(clock_obox_init), (get_class): g_type_class_peek() does not create a
	type if the class wasn't used before, so we need to call
	g_type_class_ref() (and later, g_type_class_unref())

2008-12-09  Vincent Untz  <vuntz@gnome.org>

	* obox.[ch]: (na_obox_finalize), (na_obox_class_init), (na_obox_init),
	(get_class): g_type_class_peek() does not create a type if the class
	wasn't used before, so we need to call g_type_class_ref() (and later,
	g_type_class_unref())

2008-12-09  Vincent Untz  <vuntz@gnome.org>

	* clock-face.c: (draw):
	s/gdk_pixbuf_render_to_drawable/gdk_draw_pixbuf/ (no deprecated API)
	* clock-location-tile.h: single include for gtk+
	* clock-map.c: (clock_map_finalize), (clock_map_refresh),
	(clock_map_mark), (clock_map_place_locations),
	(clock_map_render_shadow): s/gdk_pixbuf_unref/g_object_unref/ (no
	deprecated API)
	* clock-utils.h: single include for gtk+
	* clock.c: add missing include for glib/gi18n.h
	* obox.[ch]: single include for gtk+
	(get_class): s/gtk_type_class/g_type_class_peek/ (no deprecated API)

2008-12-09  Vincent Untz  <vuntz@gnome.org>

	* calendar-sources.c: define HANDLE_LIBICAL_MEMORY to avoid warning
	during compilation

2008-12-09  Vincent Untz  <vuntz@gnome.org>

	* clock.glade: remove fixed width for buttons.
	Fix bug #563030. Patch by Gabor Kelemen <kelemeng@gnome.hu>

2008-12-08  Vincent Untz  <vuntz@gnome.org>

	* clock.glade: add some inline documentation to the edit location
	window. Fix bug #555468, patch by Dan Winship <danw@gnome.org>.

==================== 2.24.2 ====================

==================== 2.24.1 ====================

2008-10-22  Vincent Untz  <vuntz@gnome.org>

	* clock-location.c: (set_weather_update_timeout): fix build.

2008-10-20  Dan Winship  <danw@gnome.org>

	* clock-location.c (set_weather_update_timeout, etc): if the
	weather update fails because of a network error, try again in 30
	seconds, and then 1 minute, 2 minutes, etc, until it succeeds, or
	we reach the original 30 minute retry time. Makes things work
	better when you connect to a wifi network that requires some sort
	of authentication/terms-of-service-acceptance before the network
	is really functional. (#556776)

2008-10-08  Dan Winship  <danw@gnome.org>

	* clock.glade: add some inline documentation to the edit location
	window. #555468

==================== 2.24.0 ====================

2008-09-12  Sebastien Bacher  <seb128@ubuntu.com>

	* clock.glade: adapt the adjustement values to the new GTK behaviour
          (bug #551818)

==================== 2.23.92 ====================

==================== 2.23.91 ====================

2008-09-02  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (calendar_day_activated): really open the calendar
	on the right day. Timezones make this harder.
	Patch by Matthias Drochner <M.Drochner@fz-juelich.de>
	Fix bug #372155 again.

2008-09-02  Vincent Untz  <vuntz@gnome.org>

	* clock-location-tile.c: (clock_location_tile_fill): improve tooltip of
	"Set" button
	Fix bug #550087

==================== 2.23.90.1 ====================

==================== 2.23.90 ====================

2008-08-06  Federico Mena Quintero  <federico@novell.com>

	https://bugzilla.novell.com/show_bug.cgi?id=414458 - When in
	12-hour mode, bringing up the clock window shows the location
	tiles in 24-hour format, but they get updated to 12-hour format at
	the next minute.

	* clock-location-tile.c (clock_location_tile_fill): Don't refresh
	the tile during creation (this gets called from
	clock_location_tile_new()), since the caller will not have had a
	chance to connect to the "need_clock_format" signal yet.

	* clock.c (create_cities_section): Refresh the location tile here,
	after connecting to its signals.

==================== 2.23.6 ====================

2008-08-04  Dan Winship  <danw@gnome.org>

	* clock.c: Use GWeatherLocationEntry and GWeatherTimezoneMenu in
	the add/edit location dialog. Remove all the old
	find-location-dialog code

	* clock.glade: Remove some old versions of dialogs, and update for
	new widgets

	* clock-country.c:
	* clock-zoneinfo.c:
	* clock-zonetable.c: Gone; GWeatherTimezone handles this now

	* Makefile.am (INCLUDES): remove refs to EVOLUTION_TEXTDOMAIN; we
	don't need to steal evolution's translations any more
	(CLOCK_SOURCES): remove stuff

==================== 2.23.5 ====================

2008-06-30  Vincent Untz  <vuntz@gnome.org>

	* calendar-client.c: (get_ical_rid): don't strdup the value returned by
	icaltime_as_ical_string, we already own it (see bug #516408)
	(calendar_appointment_finalize): fix leak

2008-06-30  Vincent Untz  <vuntz@gnome.org>

	Use the right color for tasks and appointments.
	Patch by Sjoerd Simons <sjoerd@luon.net>
	Fix bug #503581

	* calendar-client.c: (get_source_color): use e_source_peek_color_spec()
	instead of deprecated e_source_get_color()
	* calendar-window.c: (set_renderer_pixbuf_color_by_column): use
	gdk_color_parse()

2008-06-30  Vincent Untz  <vuntz@gnome.org>

	Fix compiler warnings. Patch by Kjartan Maraas <kmaraas@gnome.org>.
	Part of bug #521409.

	* calendar-client.c: (calendar_client_select_month), (filter_task),
	(calendar_client_foreach_appointment_day):
	* calendar-window.c: (set_renderer_pixbuf_pixmap_for_bday):
	* clock-face.c:
	* clock-map.c: (clock_map_update_time):
	* clock.c: (applet_change_orient), (loc_to_string):
	* gnome-clock-applet-mechanism-main.c: (get_system_bus), (main):
	* gnome-clock-applet-mechanism.c:
	(gnome_clock_applet_mechanism_constructor),
	(_check_polkit_for_action):
	* set-timezone.c: (can_do):

2008-06-30  Vincent Untz  <vuntz@gnome.org>

	Load calendars asynchronously. Fix bug #515948, and probably a few
	others. Based on patch by Chenthill Palanisamy <pchenthill@novell.com>

	* calendar-client.c: (calendar_client_set_timezone): always set the
	timezone, even if the calendar is not loaded yet
	(cal_opened_cb): new, callback when a calendar has been opened. We just
	update the appointments/tasks when relevant.
	(load_calendars): new, asynchronously open all calendars from a source
	(calendar_client_init): move some stuff around, and call
	load_calendars()
	(calendar_client_update_appointments): ignore not-loaded calendars
	(calendar_client_update_tasks): ditto
	(calendar_client_source_finalize): disconnect the opened handler
	(calendar_client_appointment_sources_changed): call load_calendars()
	since there have been changes in the list of calendars
	(calendar_client_task_sources_changed): ditto
	* calendar-sources.c: (get_ecal_from_source): renamed from
	load_esource(), we just don't open the calendar there anymore
	(calendar_sources_load_esource_list): rename variable

2008-06-30  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (is_appointment): also show groupwise and exchange
	appointments. Patch by Chenthill Palanisamy <pchenthill@novell.com>

2008-06-19  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (fill_time_settings_window): fix previous commit. Thanks to
	Chenthill Palanisamy <pchenthill@novell.com> for noticing the breakage.

2008-06-18  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (fill_time_settings_window): also select the current day on
	the calendar so that if you open the "set time" dialog on two
	different days, the calendar is always on the current day (and you
	don't accidentaly set time in past)
	Patch by Michael Meeks <michael.meeks@novell.com>.
	https://bugzilla.novell.com/show_bug.cgi?id=395146

==================== 2.23.4 ====================

==================== 2.23.3 ====================

==================== 2.23.2.1 ====================

2008-05-14  Vincent Untz  <vuntz@gnome.org>

	* set-timezone-dummy.c: (set_system_time_async),
	(set_system_timezone_async): add transient_parent_xid parameter

==================== 2.23.2 ====================

2008-05-13  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (run_prefs_locations_add), (edit_tree_row): put the focus in
	the name entry

2008-05-09  Matthias Clasen  <mclasen@redhat.com>

	* clock.c: Disable the "Set System Time" button when we
	don't have the necessary privileges. 

2008-05-08  Federico Mena Quintero  <federico@novell.com>

	* clock.c (set_time): Pass the XID of the applet's windowto
	set_system_time_async().

2008-05-08  Federico Mena Quintero  <federico@novell.com>
	* clock-location.c (clock_location_make_current): Take in a
	transient_parent_xid argument.

	* clock.c (location_start_element): Pass the XID of the applet's
	window to clock_location_make_current().

	* clock-location-tile.c (make_current): Pass XID of the toplevel
	widget's window.

2008-05-08  Federico Mena Quintero  <federico@novell.com>

	https://bugzilla.novell.com/show_bug.cgi?id=384159

	When calling the (obsolete) org.gnome.PolicyKit.Manager.ShowDialog
	method through PolicyKit, pass an XID for the transient parent
	window of what will be the auth dialog.  This prevents the window
	manager from thinking that the auth dialog is a rogue dialog with
	no parent.

	* set-timezone.c (SetTimeCallbackData): Add a transient_parent_xid
	field.
	(do_auth_async): Pass the transient_parent_xid to the ShowDialog
	method, instead of 0.
	(set_system_time_async): g_new() for safety.  Take in a transient_parent_xid argument.
	(set_system_timezone_async): Likewise.

	* clock.c (set_time): For now, pass 0 for the transient_parent_xid.

	* clock-location.c (clock_location_make_current): Likewise.

2008-05-07  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (is_appointment): accept google uri too, for
	google calendars and use g_ascii_strcasecmp(). Should help with bug
	#525691
	(is_birthday), (is_weather): use g_ascii_strcasecmp()

2008-04-23  Matthias Clasen  <mclasen@redhat.com>

	* system-timezone.c (system_timezone_is_zone_file_valid): Don't assume
	that g_io_channel_read_chars returns a NUL-terminated string - 
	it doesn't.

==================== 2.23.1 ====================

2008-04-21  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am:
	* gnome-clock-applet-mechanism.policy.in: rename to...
	* org.gnome.clockapplet.mechanism.policy.in: this, and add <vendor>,
	<vendor_url>, <icon>

2008-04-16  Matthias Clasen  <mclasen@redhat.com>

	* clock.glade: Change the mnemonics for the clock format radios
	to avoid a conflict with the help button. 

2008-04-16  Matthias Clasen  <mclasen@redhat.com>

	* clock.c: Make the help button on the preference dialog work.

==================== 2.22.1.3 ====================

2008-04-11  Vincent Untz  <vuntz@gnome.org>

	* system-timezone.c: (system_timezone_write_key_file),
	(recursive_compare), (files_are_identical_inode),
	(files_are_identical_content),
	(system_timezone_read_etc_localtime_content),
	(system_timezone_is_zone_file_valid),
	(system_timezone_set_etc_timezone): s/unsigned int/gsize/ since it's
	not the same on 64 bits machines. Fix bug #527441.
	Thanks to Jan de Groot <jan@jgc.homeip.net> for debugging this.

2008-04-11  Vincent Untz  <vuntz@gnome.org>

	Add support for Arch Linux system timezone.

	* system-timezone.c: (system_timezone_read_etc_rc_conf),
	(system_timezone_write_etc_rc_conf): new methods for config in Arch
	Linux
	Add the new methods to the list of methods.

2008-04-11  Vincent Untz  <vuntz@gnome.org>

	* system-timezone.c: add/clarify some comments
	change the default order of methods to get the timezone. First look if
	/etc/locatime is a symlink, since it's cheap.
	(system_timezone_strip_path_if_valid): new, to strip the prefix path of
	a timezone filename
	(system_timezone_read_etc_localtime_softlink): use
	system_timezone_strip_path_if_valid() to also strip "posix/" if this is
	the case
	(recursive_compare): now use system_timezone_strip_path_if_valid()

2008-04-11  Vincent Untz  <vuntz@gnome.org>

	* system-timezone.c: (recursive_compare): handle the case where the
	found file is /usr/share/zoneinfo/posix/Europe/Paris (ie, strip the
	"posix/" too)
	(system_timezone_read_etc_localtime_content): plug leak

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	Improve how the find entry is filled: always use the location name as a
	start, and put the cursor at the end of the string so the user can
	continue to type. Fix bug #527403
	Be more solid against cases where there's no Locations.xml

	* clock.c: (fill_location_tree): be more solid
	(find_next_location): ditto
	(find_entry_changed): ditto
	(find_weather_code): ditto
	(edit_clear): don't reset the state of the find window here, it's done
	in run_find_location()
	(run_find_location): improve the behavior of the find entry

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	Do not create lots of new ClockLocation everytime we load the locations
	from gconf, and try to re-use the old ones.
	As a side-effect, it fixes a bug where you need to click twice on Set
	to set the current location from a different timezone.

	* clock-location.[ch]: (clock_location_find_and_ref): new, find a
	ClockLocation if it already exists, and ref it
	(clock_location_make_current): do not do anything if the location is
	already the current one
	* clock.c: (location_start_element): try to find the location among
	existing ones first, and then fallback on creating a new one
	(run_prefs_edit_save): do not explicitly call locations_changed(), it
	will be done later via gconf notification
	(remove_tree_row): ditto

==================== 2.22.1.2 ====================

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (zone_combo_changed): add FIXME

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.glade: be a bit more reasonable with the height :-)

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.glade: change again the default size of the find location
	window. It seems it was lost with the GtkDialog migration.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.glade: do not make the edit location window resizable

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (run_find_location): pre-fill the find location entry if it
	was empty and the user typed something in the name entry of the
	previous dialog
	(edit_clear): also collapse the find location treeview when resetting
	the state of the find window

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (find_timezone), (update_timezone): don't uselessly copy a
	string

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock-zonetable.c: (clock_zonetable_load_zonetab),
	(clock_zonetable_load_iso3166): do not assume the timezone and country
	data files exist, so don't crash when they're not present. We still
	need to define a proper behavior when we don't have timezone data,
	though.
	Fix bug #527309.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (edit_clear): when clearing the "edit location" window, also
	clear the "find location" window, so that next time it gets opened,
	there's no weird pre-filled text
	* clock.glade: name the scrolled window in the find location window

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock-country.c:
	* clock-location-tile.c:
	* clock-location.c:
	* clock-zoneinfo.c: don't use libgnome/gnome-i18n.h, but glib/gi18n.h

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock-map.c: (clock_map_init): init some fields
	(clock_map_refresh): be a bit more clever about what we do. Do nothing
	if we have no space allocated. Only reload the map if the allocation
	changed.
	(clock_map_expose): add a warning for a case that should never happen
	(clock_map_size_allocate): simplify. The stock map will be loaded at
	the beginning because of an allocation anyway.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (update_calendar_popup): no need to call clock_map_refresh()
	here: it will be done on expose event and on ClockMap size allocation
	anyway. Saves ~0.06s.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock-face.c: (clock_face_finalize): do not try to get the size of
	the cache if there's no cache. Can happen if the faces are destroyed
	before being shown.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock-location-tile.c: (clock_location_tile_fill): actually, we don't
	have to call can_set_system_timezone() here since the button label is
	dynamically set on EnterNotify anyway. Again, save some time quite
	easiliy.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	Do not load the image when the object is created. Only load it once we
	actually have a useful allocation to display it. Else, we were loading
	it twice on the calendar popup: once on object creation, and once when
	the real size request happened (which was broken too, since it should
	have been size allocation...). So we can save again between 0.01s and
	0.02s per different face.

	* clock-face.c: remove old commented out code that will never be used
	in the clock applet
	(clock_face_class_init): we have a size_allocate function now
	(clock_face_init): update
	(clock_face_size_request): rewrite to just request a size, and do
	nothing else
	(clock_face_size_allocate): new, reload the face if the allocation
	changed
	(update_time_and_face): renamed from update_time(), add a
	force_face_loading argument, and only load the face if the allocation
	makes sense
	(clock_face_refresh): trivial update
	(clock_face_new): no need to call update_time() here, it will get
	called on the first useful allocation
	(clock_face_new_with_location): ditto
	(clock_face_unmap): kill this. It's useless in the clock applet too.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	Implement a cache for clock face pixbufs. They're loaded from SVG, so
	it can be a bit slow to read the file. With the cache, we win around
	0.01s and 0.02s per face clock that can use it.
	It's totally useless if you have only one location or all the locations
	are in completely different timezones (always using different SVG
	files), but it doesn't cost us anything, so it's a good thing in the
	end.

	* clock-face.c: (clock_face_finalize): don't use deprecated
	gdk_pixbuf_unref(), free the cache if it's empty
	(remove_pixbuf_from_cache): helper, to remove a unused pixbuf from the
	cache when it's reference count reaches 0
	(clock_face_load_face): initialize the cache (implemented with a
	hashtable) if needed, and try to use it. If the searched pixbuf isn't
	there, load it as we did before and add it to the cache.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	Rework to not load two svg files on creation (once for the initial file
	and once for the current time of day file). Can save between 0.01s and
	0.02s per tile.

	* clock-face.c: (clock_face_init): initial time of day is invalid
	(update_time): renamed from update_timeofday() and update the current
	time here
	(clock_face_refresh): do not update time here
	(clock_face_new): do not load a face directly, but call update_time()
	that will have the side effect of loading one
	(clock_face_new_with_location): ditto

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (create_cities_section): do not refresh the tile after
	having created it. It's already fresh when created, so no need to
	refresh. Really small saving (clearly less than 0.01s per tile), but
	obvious thing to do.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock-map.c: (clock_map_new): do not refresh the map here. It will
	get refreshed on expose anyway (if not before). Save 0.03s.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* set-timezone.c: (can_set_system_timezone), (can_set_system_time):
	Implement some caching of the can_do variables. This is some minor
	saving (around 0.01s for each location when opening the calendar
	window), but it was kind of obvious to do.

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	Rewrite the code to set the system timezone. It should work on most
	distributions now, instead of only the ones doing the same thing as
	Fedora. Like the rewrite to get the timezone, it helps improve the
	world.

	* Makefile.am: fix typo and add system-timezone.[ch] to
	gnome_clock_applet_mechanism_SOURCES
	* gnome-clock-applet-mechanism.c:
	(gnome_clock_applet_mechanism_set_timezone): just call
	system_timezone_set_from_file()
	* system-timezone.[ch]: add clear comments and some code to easily test
	the functions
	Also add comments on our current knowledge about system timezones on
	the various distributions.
	(system_timezone_constructor),
	(system_timezone_finalize): fix the same singleton issue as the one
	fixed in the previous commit
	(system_timezone_write_etc_timezone),
	(system_timezone_write_key_file),
	(system_timezone_write_etc_TIMEZONE),
	(system_timezone_write_etc_sysconfig_clock),
	(system_timezone_write_etc_sysconfig_clock_alt),
	(system_timezone_write_etc_conf_d_clock),
	(system_timezone_is_zone_file_valid),
	(system_timezone_set_etc_timezone),
	(system_timezone_update_config), (system_timezone_set_from_file),
	(system_timezone_set), (system_timezone_error_quark): well, all new. To
	do some magic things. Some code is loosely based on what was in
	gnome-clock-applet-mechanism.c

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	* clock-zonetable.c: (clock_zonetable_constructor),
	(clock_zonetable_finalize): fix invalid singleton after last ref. This
	was mostly a theoretical problem, since when the singleton is
	finalized, the applet process leaves. Except that some distributions
	ship in-process applets :-)

	* clock-zonetable.c: (clock_zonetable_parse_coord): actually save the
	result of sscanf before evaluating. Fix timezone combo box being
	empty. Fix by Sébastien Bacher <seb128@ubuntu.com>

2008-04-10  Vincent Untz  <vuntz@gnome.org>

	Huge performance improvement when clicking "Add" for adding a location.
	Before this, the first click took around 0.2s and the following clicks
	took more than 0.8s (!!!). Now the first click takes less than 0.15s
	and the following clicks take around 0.007s. (put some James Bond music
	here)

	* clock.c: (revert_sort_zoneinfo_by_l10n_name): renamed from
	sort_zoneinfo_by_l10n_name() because it revert sorts.
	(fill_timezone_combo_from_location): be a bit more serious. First,
	let's not clear the combo box to add items again since the list of
	timezones never changes. Then don't append to the combo box, but
	prepend. There's no need to append.

2008-04-09  Vincent Untz  <vuntz@gnome.org>

	* gnome-clock-applet-mechanism.c: (_set_time),
	(_rh_update_etc_sysconfig_clock): remove useless declarations

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	Make some memory savings by not remembering useless data. The code to
	keep the data is still available by compiling with
	-DMEMORY_DOESNT_MATTER

	* clock-country.[ch]: remove all the non-localized name stuff in
	"#ifdef MEMORY_DOESNT_MATTER". This implies having a new field to keep
	the localized name in memory (but it's not strdupped, so it's still
	better)
	* clock-zoneinfo.[ch]: remove all the non-localized city and comment
	stuff in "#ifdef MEMORY_DOESNT_MATTER"

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* system-timezone.c: add a minor FIXME

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* system-timezone.c: (system_timezone_new): minor cleanup

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	Completely rewrite the way we detect the system timezone. It will work
	on more distributions this way. Also the code is better and it helps
	improve the world.
	Good thing is that now the clock will always immediately update after
	the timezone is updated.

	* Makefile.am: add new files
	* system-timezone.[ch]: new file, implement a singleton that knows how
	to read the system timezone and that monitors it
	* clock-location.[ch]: (clock_location_new): don't get the TZ
	environment variable here
	(files_are_identical):
	(recursive_guess_zone):
	(guess_zone_from_tree):
	(parse_etc_sysconfig_clock):
	(monitor_etc_sysconfig_clock):
	(zone_from_etc_sysconfig_clock):
	(clock_location_guess_zone): killed
	(clock_location_init): updated to create the SystemTimezone object
	(clock_location_finalize): updated
	(clock_location_unset_tz): use system_timezone_get_env() instead of a
	local variable
	(clock_location_is_current_timezone): use system_timezone_get()
	(clock_location_get_offset): use clock_location_unset_tz() instead of
	duplicating code
	(make_current_cb): updated to remove the current timezone handling
	* clock-zoneinfo.h: move SYSTEM_ZONEINFODIR to system-timezone.h
	* clock-zonetable.c: add new include
	* clock.c: add a SystemTimezone object
	(destroy_clock): unref it
	(clock_timezone_changed): new, handle system timezone change
	(fill_clock_applet): create the SystemTimezone object and connect to
	its changed signal

	* clock-marshallers.list: remove marshallers that already exist in glib
	* clock-location.[ch]: (clock_location_class_init): updated for this

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* clock-zoneinfo.[ch]: add some const to function declarations
	(clock_zoneinfo_new): fix a leak, fix a problem with localized city
	names for timezones that are just named after a city
	* clock-zonetable.c: (clock_zonetable_load_zonetab): add some casting
	(clock_zonetable_load_iso3166): add useful comment
	* clock.c: (sort_zoneinfo_by_l10n_name),
	(fill_timezone_combo_from_location): make some strings const

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	Lots of cleanup, some leak plugging.

	* clock-country.[ch]: add some const to function declarations
	* clock-zonetable.[ch]: lots of minor changes all over the place.
	Basically:
	 - make the ClockZonetable object a singleton
	 - be a bit more solid when parsing files
	 - plug some leaks (don't forget to unref ClockCountry and
	   ClockZoneinfo, eg)
	 - clean up the code to be more readable
	 - add some const to function declarations
	* clock.c: (create_cities_store): small FIXME for later

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* clock-zonetable.c: (clock_zonetable_new), (clock_zonetable_init),
	(clock_zonetable_finalize), (clock_zonetable_load_zonetab): remove all
	code using available_zones since it wasn't used. The initialization was
	done in a "#ifdef USE_CRIPPLED_ZONELIST" and it's not possible to
	trigger it. The code was used to only add timezones from a whitelist.

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	Use the right directory for timezone data on Solaris.
	Based on patch by Brian Cameron <brian.cameron@sun.com>
	Fix bug #515085.
	Also use the right evolution text domain for timezone translations.

	* Makefile.am: remove definition of SYSTEM_ZONEINFODIR, and update the
	evolution text domain
	* clock-zoneinfo.h: define SYSTEM_ZONEINFODIR
	* clock-zonetable.[ch]: (clock_zonetable_new): do not take an argument,
	and directly use the defined value for the directory
	* clock.c: (fill_clock_applet): updated

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* clock-map.c: (clock_map_new), (clock_map_init): minor cleanup

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* clock-map.c: add enums for markers and an array for marker files
	(clock_map_new),: do not load the marker pixbuf here
	(clock_map_init): do it here, with a simple loop
	(clock_map_finalize):
	(clock_map_place_location): trivial updates to use the enum

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	Remove the rotation step in the map. I believe the goal was to make it
	possible to display a map where the center is not 0/0 (lat/lon) but the
	center is hardcoded to 0/0 right now and I don't think it makes sense
	to rotate the map since this view is really usual.
	Might fix #516345.

	* clock-map.c: (clock_map_finalize), (clock_map_expose),
	(clock_map_display): trivial updates
	(clock_map_rotate): kill

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* clock-map.c: make last_refresh a time_t since we don't need struct tm
	(clock_map_init): initialize last_refresh
	(clock_map_display): update the last_refresh time here
	(clock_map_needs_refresh): simplify a bit, do not update the
	last_refresh time here since we didn't refresh anything, and also take
	into account the fact that the clock can go back in the past when
	changing time

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* clock-location.[ch]: remove clock_location_new_from_env(). Not really
	sure it's a good thing to have (can give pretty wrong results), and
	it's not used.

==================== 2.22.1.1 ====================

2008-04-08  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (location_set_current_cb): don't refresh the map if there's
	no map. Fix a crash.

==================== 2.22.1 ====================

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* clock-location.c: (clock_location_is_current): emit the set-current
	signal when changing the current location
	* clock.c: (run_prefs_edit_save): set the new location as current if it
	makes sense

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* calendar-sources.c: fix compilation
	(calendar_sources_load_esource_list): complete fix for bug #378854.
	There was a case where the handler wasn't disconnected.

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* calendar-sources.c: (calendar_sources_finalize_source_data):
	disconnect the changed signal handler for esource_list. Might fix bug
	#488819.
	Also fix a small GSList leak.

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	Don't show weather information of the last location once it has been
	removed. Fix bug #526300.
	Also fixes the empty space at the left of the clock when there's no
	location.

	* clock.c: (update_panel_weather): show the weather obox only if there
	is at least one location
	(locations_changed): show/hide weather obox if there's locations/no
	location
	(location_weather_updated_cb): add FIXME for later

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	Don't lose weather code when editing a location and changing the
	timezone. Fix bug #522007

	* clock.c: (update_coords_helper): new, from code of update_coords
	(update_coords): updated to use update_coords_helper
	(zone_combo_changed): be a bit more clever and only update fields of
	the window if we have to guess them from the timezone
	(edit_tree_row): set weather-code on the window so that it's saved

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* clock-location-tile.c: (weather_info_setup_tooltip): strdup the
	various temperatures we get, since else we end up with the same
	string which makes it useless to compare the strings.
	Also display the non-rounded temperature.
	Fix bug #526171.

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	Handle multiple locations in the same timezone in a better way.
	Patch by Matthias Clasen <mclasen@redhat.com>
	Fix bug #520212.
	Matthias had committed the clock.c part of this patch by accident in
	commit 10968 (when converting to GtkDialog).

	* clock-location-tile.[ch]: (clock_location_tile_class_init),
	(make_current_cb), (enter_or_leave_tile),
	(clock_location_tile_fill): remove the timezone-set signal
	* clock-location.[ch]: We now have the current location.
	(clock_location_class_init): add new set-current signal
	(clock_location_is_current_timezone): updated for clarity
	(clock_location_is_current): new
	(make_current_cb): updated, to update the static variable containing
	the current location
	(clock_location_make_current): ditto, and don't change timezone if
	we're already in the right one, just  change the current location
	* clock.c: (locations_changed): remove FIXME
	(location_start_element): only mark the location as the current one if
	it's in the current timezone. Else, this means changing the system
	timezone each time the applet starts, which is kind of wrong.

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (set_time): correctly set time, even when DST is on.
	Thanks to Pascal Terjan <pascal.terjan@free.fr> for the hint.
	Should fix bug #525762.

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* calendar-sources.c: (calendar_sources_finalize_source_data):
	disconnect the backend_died signal handler to not have it left around
	with invalid user data when the CalendarSources object is finalized.
	Fix famous crash from bug #378854.

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (calendar_day_activated): open evo on the right
	day, instead of some day before or after because of timezone
	confusion.
	Fix bug #372155

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* set-timezone.c: (set_time_notify): ignore no-reply dbus errors when
	setting the time because dbus doesn't use a monotonic clock.
	Patch by Matthias Clasen <mclasen@redhat.com>
	Fix bug #526266.

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (is_appointment): show caldav appointments too.
	Fix by Debian (Roland Mas). Fix bug #501569

2008-04-07  Vincent Untz  <vuntz@gnome.org>

	Use new gweather API, and make sure we always use data from the right
	country. Patch by Dan Winship <danw@gnome.org>. Fix bug #519823.

	* gweather-xml.c: gone, moved to libgweather
	* clock-location.c: updated
	* Makefile.am: updated
	* clock.c: #include <libgweather/gweather-xml.h> rather than
	"gweather-xml.h"
	(find_timezone): if the weather station has a country code
	associated with it, only return timezones that are also located in
	that country.
	(update_timezone): Use the tz-hint and iso-code from the location
	data to more reliably pick a timezone. #519823.
	(find_weather_code): Moved here from gweather-xml.c and updated to
	look for a matching country code as well.

2008-04-03  Vincent Untz  <vuntz@gnome.org>

	Fix initial visibility of the appointments to actually follow the state
	of the expander. Fix bug #524296.

	* calendar-window.c: (create_task_list): add comment
	(create_list_for_appointment_model): add comment and change order of
	gtk_widget_show() and gtk_container_add() to fix the bug
	(add_child): simplify by calling expand_collapse_child()
	(calendar_window_pack_locations): add comment
	* clock.c: (locations_changed): add FIXME about a runtime warning

2008-04-03  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am:
	* timezone.glade: remove timezone.glade, unused now.

2008-04-03  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (update_calendar_popup): nullify a widget pointer when
	closing the popup. Should fix bug #525754, where the destroyed widget
	was used.

2008-04-03  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (update_timezone): if the coordinates are known to not be
	valid, just empty the timezone selection
	(run_find_location_save): updated to pass a new argument to
	update_timezone()
	Fix crash bug #522438

2008-04-02  Vincent Untz  <vuntz@gnome.org>

	* clock-map.c: (clock_map_expose): correctly redraw the map outline in
	expose event, instead of painting it inside the map. Fix bug #519246.
	Patch by Matthias Clasen <mclasen@redhat.com>

2008-04-02  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: updated
	* e-map/Makefile.am:
	* e-map/e-map-marshal.list:
	* e-map/e-map.c:
	* e-map/e-map.h:
	* tz-list.c:
	* tz-list.h:
	* tz-sel-dialog.c:
	* tz-sel-dialog.h:
	* tz-window.c:
	* tz-window.h:
	* tz.c:
	* tz.h: Remove all those files that aren't used anymore.

2008-04-02  Vincent Untz  <vuntz@gnome.org>

	Clean things a bit. It's easier to have one function call instead of
	always the same three calls.

	* clock-map.c: (clock_map_refresh):
	(highlight):
	(clock_map_update_time): don't call clock_map_render_shadow() and
	clock_map_rotate()
	(clock_map_display): add those calls here.

2008-04-02  Vincent Untz  <vuntz@gnome.org>

	Fix crash when closing the clock window while a city is blinking on the
	map. Fix bug #519493.
	Also improve things a bit if you click quickly on two cities.

	* clock-map.c: (clock_map_init): add a timeout id for the blinking
	(clock_map_finalize): stop blinking. This fixes the crash
	(highlight): simplify a bit because of the destroy handler
	(highlight_destroy): new, destroy handler for the timeout
	(clock_map_blink_location): if there was already something blinking,
	stop it first. Add a destroy handler for the timeout.

2008-04-02  Vincent Untz  <vuntz@gnome.org>

	* set-timezone.c: (can_do): initialize variables at the beginning of
	the function, so that we don't crash because of unitiliazed variables
	after a goto.
	Should fix bug #522538, bug #523643.

2008-03-28  Matthias Clasen  <mclasen@redhat.com>

	* clock.c: Fix issues with adding/removing locations, pointed
	out by Dan Winship. This regression was introduced in the 
	commit on 2008-03-14.

2008-03-28  Matthias Clasen  <mclasen@redhat.com>

	* clock.glade:
	* clock.c: Do the same conversion to GtkDialog for the edit
	and find location windows.

2008-03-27  Matthias Clasen  <mclasen@redhat.com>

	* clock.glade: Convert the set-time window into a dialog, to
	make Esc work, pointed out by Dan Winship. 

	* clock.c (ensure_time_settings_window): Handle delete events.

2008-03-27  Matthias Clasen  <mclasen@redhat.com>

	* clock.glade: Make the find-location window larger. 
	Change proposed by Dan Winship.

2008-03-14  Matthias Clasen  <mclasen@redhat.com>

	* clock.c (fill_prefs_window): Make sure that we create the
	cities store before we fill the preference window. 

2008-03-13  William Lachance  <wrlach@gmail.com>

	* clock.c: (find_entry_changed): Fix crash when there are no
	locations available. Fixes bug #521563.

==================== 2.22.0 ====================

2008-03-05  Jens Granseuer  <jensgr@gmx.net>

	* clock-face.c: (update_timeofday):
	* clock-location-tile.c: (clock_location_tile_fill):
	* clock-location.c: (guess_zone_from_tree):
	* clock-zonetable.c: (clock_zonetable_parse_location),
	(clock_zonetable_load_zonetab), (clock_zonetable_load_iso3166):
	* clock.c: (parse_gconf_cities), (run_prefs_edit_save),
	(run_find_location): fix build for compilers that don't like C99.
	Fixes bug #518895.

2008-03-03  Vincent Untz  <vuntz@gnome.org>

	Display sunrise/sunset in local (to the location) time.
	Fix bug #518106. Patch by Matthias Clasen <mclasen@redhat.com>

	* clock-location-tile.[ch]: (weather_info_setup_tooltip): hack to
	display the sunrise/sunset in local time
	(weather_tooltip): update
	* clock.c: (weather_tooltip): update

2008-02-28  David Zeuthen  <davidz@redhat.com>

	* set-timezone.c (can_do): Don't hardcode the polkit results for
	determining when we can authenticate to gain an
	authorization. This fixes a bug where ONE_SHOT auths weren't
	handled because PolKitResult enumerations for these were added
	after this code was written.
	(get_pk_context): Integrate libpolkit into the main loop. Need
	this to refresh the authorization cache. This fixes a bug where
	the Set buttons were not updated. Now it works as expected, e.g.
	the "Set..." becomes a "Set" if you gain the authorization (and
	it's not a one shot one)
	(pk_io_remove_watch_fn, pk_io_add_watch_fn)
	(pk_io_watch_have_data): libpolkit mainloop integration functions.

2008-02-28  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (clock_migrate_to_26): fix previous commit to not break the
	build

2008-02-28  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (clock_migrate_to_26): don't set the format key if we're
	reaching this without really migrating from 2.6 but because the value
	is just non-sense. Fix a crash, bug #518963.

2008-02-26  Matthias Clasen  <mclasen@redhat.com>

	* Makefile.am (check): Validate PolicyKit policy files.

==================== 2.21.92 ====================

2008-02-20  Matthias Clasen  <mclasen@redhat.com>

	* clock-location-tile.c: Try harder to avoid resizing
	the popup. 

	* clock.c: Refresh the tiles when the timezone changes.

2008-02-20  Matthias Clasen  <mclasen@redhat.com>

	* clock-location.c (clock_location_get_offset): Take daylight
	savings time into account.

2008-02-18  Matthias Clasen  <mclasen@redhat.com>

	Set timezones asynchronously. This keeps the clock ticking
	while the auth dialog is up.

	* set-timezone.[hc]: Replace the synchronous set_timezone call
	by an asynchronous version, reusing the async machinery for the
	set_time call.

	* clock-location.[hc]: Do the same for the 
	clock_location_make_current call.
	
	* clock-location-tile.c: Use async call to set the timezone.

2008-02-18  Matthias Clasen  <mclasen@redhat.com>

	Fix the display of the weather on the panel.

	* clock.c: Fix some memory management issues wrt. to 
	ClockData.locations, and connect to the weather-updated
	signal on the ClockLocation instead of the ClockLocationTile.

	* clock-location-tile.[ch]: Get rid of the weather-updated
	signal that is no longer used.

2008-02-18  Matthias Clasen  <mclasen@redhat.com>

	* clock.glade: Make all of the nested pref dialogs use the dialog
	window class, to avoid some focus and stacking order oddities with
	metacity.
	
2008-02-18  Matthias Clasen  <mclasen@redhat.com>

	Fix the time display in the location tiles to be the time at the 
	location (currently, all tiles show the local time, which is rather 
	pointless). Also fix the problem where the time is invisible for
	a while after the popup has been shown.

	This introduces some new strings (the strftime formats used for 
	formatting the time for the tiles), but there should be little
	need to translate them.

	* clock-location-tile.[hc]: Replace the need-formatted-time signal
	by a need-clock-format. Do our own time formatting, since the
	needs are somewhat different from the time display in the panel,
	and we really only want to respect the 12/24h preference.

	* clock.c: Handle the need-clock-format signal.

	* clock-marshallers.list: Add INT:VOID marshaller for the 
	need-clock-format signal.

2008-02-15  Matthias Clasen  <mclasen@redhat.com>

	* gweather-xml.c (find_weather_code): Remove a debug statement
	that can conceivably crash if the model is empty. Fix bug #510636.

==================== 2.21.91 ====================

2008-02-11  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: tweak for distcheck...

2009-02-09  Matthias Clasen  <mclasen@redhat.com>
	
	* pixmaps/clock-map.png: png version of the world map that is
	10 times smaller than the svg.

	* pixmaps/Makefile.am: Install clock-map.png

	* clock-map.c: Load the map as png.

2008-02-09  Vincent Untz  <vuntz@gnome.org>

	Port to gio.
	Based on patch by Diego Escalante Urrelo <diegoe@gnome.org>
	Fix part of bug #509756.

	* clock-location.c: (monitor_etc_sysconfig_clock): updated for
	GFileMonitor changed signal
	(zone_from_etc_sysconfig_clock): use GFileMonitor
	(clock_location_finalize): free the monitor

==================== 2.21.90 ====================

2008-01-28  Luca Ferretti  <elle.uca@libero.it>

	* gnome-clock-applet-mechanism.policy.in:
	Change <message> strings to match the ones from PolicyKit package.

2008-01-28  Luca Ferretti  <elle.uca@libero.it>

	* gnome-clock-applet-mechanism.policy.in: fix my broken patch...

2008-01-28  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: clean this a bit

2008-01-28  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: updated to intltoolize the policy.in file
	* gnome-clock-applet-mechanism.policy: moved...
	* gnome-clock-applet-mechanism.policy.in: ... here, and mark strings
	as translatable
	Fix bug #510635. Patch by Luca Ferretti <elle.uca@libero.it>

2008-01-28  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: define where Locations.xml is (via pkg-config)
	* gweather-xml.c: (gweather_xml_load_locations): updated for the
	change
	Fix bug #509888.
	Patch by Patryk Zawadzki <patrys@pld-linux.org>

2008-01-28  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (create_hig_frame): fix compilation when there's
	no eds support. Fix bug #509840.
	Patch by Saleem Abdulrasool <compnerd@compnerd.org>

2008-01-25  Matthias Clasen  <mclasen@redhat.com>

	* clock.schemas.in: Add list_type for cities.

2008-01-20  Christian Persch  <chpe@gnome.org>

	* Makefile.am: Add --internal when generating the marshalers.

2008-01-16  Christian Persch  <chpe@gnome.org>

	* clock.glade: Fix minor HIGness problems in Prefs dialogue (spacings,
	missing mnemonics).

2008-01-16  Matthias Clasen <mclasen@redhat.com>

	* Makefile.am (EXTRA_DIST): This must not depend on 
	HAVE_POLKIT unless the maintainer remembers to only ever
	distcheck on systems with a new enough PolicyKit.

2008-01-16  Kjartan Maraas  <kmaraas@gnome.org>

	* Makefile.am: Fix a typo that broke the build.

2008-01-15  Carlos Garcia Campos  <carlosgc@gnome.org>

	* Makefile.am: Add -DGWEATHER_I_KNOW_THIS_IS_UNSTABLE. Fixes bug
	#509581.	
	
==================== 2.21.5 ====================

2008-01-14  Federico Mena Quintero  <federico@novell.com>

	* clock.c: Don't include langinfo.h.

2008-01-07  Federico Mena Quintero  <federico@novell.com>

	* clock.c (fill_prefs_window): Use
	gweather_prefs_get_*_display_name() instead of pulling
	translations from another module.

2008-01-03  Federico Mena Quintero  <federico@novell.com>

	* clock-location-tile.c (clock_location_tile_new): Save the signal
	connection ID of the location's "weather-updated" signal...
	(clock_location_tile_finalize): ... so we can disconnect from it
	when the location tile goes away.  This prevents us from getting
	notified after the tile is destroyed.

2008-01-03  Matthias Clasen  <mclasen@redhat.com>

	* clock-location-tile.c (weather_info_setup_tooltip): Use
	weather_info_get_icon_name() instead of the obsolete
	weather_info_get_pixbuf().
	(update_weather_icon): Likewise.

2008-01-03  Matthias Clasen  <mclasen@redhat.com>

	* clock.c (temp_unit_enum_map): Removed.
	(speed_unit_enum_map): Removed.
	(parse_and_set_temperature_string): Use the new
	gweather_prefs_parse_temperature() instead of doing things by
	hand.
	(parse_and_set_speed_string): Likewise with
	gweather_prefs_parse_speed().
	(temperature_combo_changed): Use
	gweather_prefs_temp_enum_to_string() instead of our home-grown
	function.
	(speed_combo_changed): Likewise with
	gweather_prefs_speed_enum_to_string().

2008-01-02  Federico Mena Quintero  <federico@novell.com>

	* clock.c (create_clock_window): Show the clock_vbox.

2008-01-02  Federico Mena Quintero  <federico@novell.com>

	* clock.c (format_time): Move the code from update_clock().
	(update_clock): Use format_time().
	(location_tile_need_formatted_time_cb): Implement.

	* clock-location-tile.c (clock_location_tile_refresh): Handle null
	time strings.

2008-01-02  Federico Mena Quintero  <federico@novell.com>

	* clock-location-tile.h (ClockLocationTileClass): Add a
	need_formatted_time field.

	* clock-location-tile.c (clock_location_tile_class_init): Define
	the "need-formatted-time" signal.
	(clock_location_tile_refresh): Emit the signal when we need the time.

	* clock-marshallers.list: Add a STRING:VOID marshaller.

	* clock.c (create_cities_section): Connect to
	"need-formatted-time" on the location tile.

2008-01-02  Federico Mena Quintero  <federico@novell.com>

	* clock.c (update_calendar_popup): NULL the widget fields after
	freeing the whole calendar popup.
	(run_prefs_locations_add): Set the "add location" window as
	transient for the preferences window.  Present the window with the
	correct timestamp.
	(run_find_location): Likewise for the "find location" window, but
	with the "add location" as its transient parent.

2008-01-02  Federico Mena Quintero  <federico@novell.com>

	* Makefile.am (libexec_PROGRAMS): Add gnome-clock-applet-mechanism.
	(dbus_services_DATA): Add the D-Bus service files...
	(dbus_conf_DATA): ... the configuration files ...
	(polkitdir): and the PolicyKit files.

2008-01-02  Federico Mena Quintero  <federico@novell.com>

	* gnome-clock-applet-mechanism.c: New file, moved from intlclock.

	* gnome-clock-applet-mechanism.h: New file, moved from intlclock.

	* gnome-clock-applet-mechanism-main.c: New file, moved from intlclock.

	* gnome-clock-applet-mechanism.xml: New file, moved from intlclock.

	* Makefile.am (BUILT_SOURCES): Add the glue for the DBus stuff.
	(gnome-clock-applet-mechanism-glue.h): Likewise.
	(gnome_clock_applet_mechanism_SOURCES): Add the mechanism sources.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock-location-tile.h (ClockLocationTileClass): Add a
	weather_updated signal.

	* clock-marshallers.list: Add a VOID:OBJECT,STRING marshaller for
	the weather_updated signal.

	* clock-location-tile.c (clock_location_tile_class_init): Define
	the weather-updated signal.
	(clock_location_tile_refresh): Emit the weather-updated signal.
	(update_weather_icon): Likewise.

	* clock.c (location_tile_weather_updated_cb): Set the weather icon
	in the panel and the temperature label.
	(create_cities_section): Connect to "weather-updated" on the
	location tiles.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock-map.c (clock_map_class_init): Oops, make the
	need-locations signal RUN_LAST, since the handler must return a
	value.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock-location-tile.h (ClockLocationTileClass): Add a
	timezone_set signal.

	* clock-location-tile.c (clock_location_tile_class_init): Define
	the timezone-set signal.
	(make_current): Emit the signal.

	* clock-map.c (clock_map_new): Remove dead code to connect to
	current-timezone-changed on the clock.

	* clock.c (create_cities_section): Connec to "timezone-set" on
	each location tile....
	(location_tile_timezone_set_cb): ... and refresh the map here.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock-map.h (ClockMapClass): Add a need_locations signal.

	* clock-map.c (clock_map_class_init): Define the need-locations signal.
	(clock_map_place_locations): Emit the signal here to fetch the
	list of locations.

	* clock-marshallers.list: We need a POINTER:VOID marshaller.

	* clock.c (create_map_section): Connect to "need-locations" on the map.
	(map_need_locations_cb): New handler.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock.c (update_clock): Only update the map if it exists.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock-map.c (clock_map_blink_location): Made public; ref the location.
	(highlight): Unref the location.

	* clock-location-tile.h (ClockLocationTileClass): Add a
	tile_pressed signal.

	* clock-location-tile.c (clock_location_tile_class_init): Define
	the "tile-pressed" signal.
	(press_on_tile): Emit the "tile-pressed" signal.
	(clock_location_tile_get_location): New public function.

	* clock.c (create_cities_section): Connect to "tile-pressed" on
	each new tile.
	(location_tile_pressed_cb): New handler; makes the map blink the
	location corresponding to the tile.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock-map.c (clock_map_update_time): Made public; renamed from
	clock_map_tick().

	* clock.c (update_clock): Update the map's time.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock.c (update_location_tiles): New function; refreshes the tiles.
	(update_clock): Call update_location_tiles() so they tick in time
	with the clock.
	(struct _ClockData): New field "location_tiles".
	(create_cities_section): Maintain the list of location tiles.
	(destroy_clock): Free the location_tiles list.

	* clock-location-tile.c (clock_location_tile_refresh): Make this
	function public.
	(clock_location_tile_tick): Removed.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock-map.c (clock_map_locations_changed): Removed.

	* clock.c (set_locations): Update the cities section and the map.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock.c (cancel_time_settings): Refresh the clock timeout.
	(run_time_settings): Likewise.
	(prefs_hide): Likewise.
	(display_properties_dialog): Likewise.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* clock.c (update_tooltip): Add the timezone name to the tooltip here...
	(update_time_tooltip): ... instead of here.  Remove this function.

2007-12-14  Federico Mena Quintero  <federico@novell.com>

	* calendar-window.h (struct _CalendarWindowClass): Add an
	edit_locations signal.

	* calendar-window.c (calendar_window_class_init): Define the
	edit-locations signal.
	(edit_locations): Emit the signal so our caller can respond.

	* clock.c (create_calendar): Connect to edit-locations on the
	calendar window...
	(edit_locations_cb): ... and handle it here by popping up the
	preferences dialog in the locations page.

2007-12-13  Federico Mena Quintero  <federico@novell.com>

	* clock.c (config_date): Use run_time_settings(), which uses the
	new set-the-time dialog backed by PolicyKit, instead of the old
	code that picks a time configuration tool.
	(set_time_callback): Moved from intlclock.
	(set_time): Moved from intlclock.
	(cancel_time_settings): Moved from intlclock.

2007-12-13  Federico Mena Quintero  <federico@novell.com>

	* clock.c (run_time_settings): Moved from intlclock.
	(edit_tree_row): Moved from intlclock.
	(run_prefs_locations_add): Moved from intlclock.
	(run_prefs_locations_remove): Moved from intlclock.
	(zone_combo_changed): Moved from intlclock.
	(run_prefs_edit_save): Moved from intlclock.
	(save_cities_store): Moved from intlclock.
	(loc_to_string): Moved from intlclock.
	(location_start_element): Moved from intlclock.
	(sort_zoneinfo_by_l10n_name): Moved from intlclock.

2007-12-13  Federico Mena Quintero  <federico@novell.com>

	* clock.c (find_next_location): Moved from intlclock.
	(find_location): Moved from intlclock.
	(find_entry_changed): Moved from intlclock.
	(location_tree_selection_changed): Moved from intlclock.

2007-12-13  Federico Mena Quintero  <federico@novell.com>

	* clock.c (run_find_location): Moved from intlclock.
	(location_row_activated): Moved from intlclock.
	(fill_location_tree): Moved from intlclock.
	(run_find_location_save): Moved from intlclock.
	(update_coords): Moved from intlclock.
	(update_timezone): Moved from intlclock.
	(find_timezone): Moved from intlclock.
	(fill_timezone_combo_from_location): Moved from intlclock.

2007-12-13  Federico Mena Quintero  <federico@novell.com>

	* clock.c (edit_clear): Moved from intlclock.
	(edit_hide): Moved from intlclock.
	(wrap_cb): Moved from intlclock.

2007-12-12  Federico Mena Quintero  <federico@novell.com>

	* clock.c (update_time_tooltip): Moved from intlclock's
	update_panel_label(); we just keep the tooltip part.
	(update_weather_locations): Moved from intlclock.

2007-12-12  Federico Mena Quintero  <federico@novell.com>

	* clock.c (update_calendar_popup): Refresh the map display.

2007-12-12  Federico Mena Quintero  <federico@novell.com>

	* clock.c (create_cities_section): Moved from intlclock.
	(create_map_section): Moved from intlclock.

2007-12-12  Federico Mena Quintero  <federico@novell.com>

	* clock.c (create_cities_store): Moved from intlclock.

2007-12-10  Federico Mena Quintero  <federico@novell.com>

	* Makefile.am (CLOCK_SOURCES): Add clock-location-tile.[ch].

	* clock.c: Removed the cut&pasted enums from libgweather.

2007-12-10  Federico Mena Quintero  <federico@novell.com>

	* clock.c: Add missing includes.

2007-12-07  Federico Mena Quintero  <federico@novell.com>

	* calendar-window.c (calendar_window_get_locations_box): Moved
	from intltlock.

	* clock.c (weather_tooltip): Moved from intlclock.
	(create_clock_widget): Add a tooltip callback for the weather_obox.

2007-12-07  Federico Mena Quintero  <federico@novell.com>

	* clock.c (fill_clock_applet): Initialize the zone table.
	(struct _ClockData): New field "zones".
	(destroy_clock): Free the zone table and the locations.

2007-12-07  Federico Mena Quintero  <federico@novell.com>

	* clock-map.[ch]: New files, moved from intlclock.

	* Makefile.am (CLOCK_SOURCES): Add clock-map.[ch].

2007-12-07  Federico Mena Quintero  <federico@novell.com>

	* clock-sunpos.[ch]: New files, moved from intlclock.

	* Makefile.am (CLOCK_SOURCES): Add clock-sunpos.[ch].

2007-12-06  Federico Mena Quintero  <federico@novell.com>

	* clock.c (N_GCONF_PREFS): Oops, fix the number of preferences.

	* calendar-window.c (KEY_LOCATIONS_EXPANDED): New key.
	(expander_activated): Support KEY_LOCATIONS_EXPANDED.
	(calendar_window_pack_locations): Moved from Intlclock.

	* clock.glade: Make the prefs-window not visible by default.

2007-12-05  Federico Mena Quintero  <federico@novell.com>

	* clock-location-tile.c (clock_location_tile_new): Don't take in a
	Clock and a ClockUI.  We'll make this object just emit signals
	instead of frobbing things directly.  Elsewhere in the code,
	commented out parts that require those objects to be present.

2007-12-05  Federico Mena Quintero  <federico@novell.com>

	* gweather-xml.[ch]: Moved from intlclock.

	* clock-marshallers.list: New file, moved from intlclock.

	* Makefile.am (BUILT_SOURCES): Add clock-marshallers.[ch].
	(clock-marshallers.c, clock-marshallers.h): New targets.
	(INCLUDES): Define SYSTEM_ZONEINFODIR.
	(CLOCK_SOURCES): Add gweather-xml.[ch]
	(CLOCK_LDADD): Ugh, add -lgweather.  We'll make this cleaner soon.

	* clock-location.c: #ifdef-out again the code that requires
	NetworkManager 0.7.

2007-12-05  Federico Mena Quintero  <federico@novell.com>

	* pixmaps/*: Moved from intlclock.

	* Makefile.am (SUBDIRS): Add pixmaps directory.

2007-12-05  Federico Mena Quintero  <federico@novell.com>

	* clock-location-tile.[ch]: New files, moved from intlclock.
	These won't compile yet due to the clocks having a different
	architecture.

2007-12-05  Federico Mena Quintero  <federico@novell.com>

	* Makefile.am (CLOCK_SOURCES): Add all the new files.
	(glade_DATA): Add clock.glade.

	* clock-face.[ch]: New files, moved from intlclock.

2007-12-05  Federico Mena Quintero  <federico@novell.com>

	* clock-zoneinfo.[ch]:
	* clock-zonetable.[ch]:
	* clock-country.[ch]:
	* clock-location.[ch]: New files, moved from intlclock.

2007-12-05  Federico Mena Quintero  <federico@novell.com>

	* clock.c (struct _ClockData): New field "set_time_button".
	(update_set_time_button): Moved from intlclock.

	* set-timezone.[ch]: New files, moved from intlclock.

	* Makefile.am (CLOCK_SOURCES): Add set-timezone.[ch].

2007-12-04  Federico Mena Quintero  <federico@novell.com>

	* clock.c (load_gconf_settings): Finish merging from intlclock.

2007-12-04  Federico Mena Quintero  <federico@novell.com>

	* clock.c (struct _ClockData): New fields "locations", "cities_store".
	(cities_changed): Move from intlclock, along with helper function
	stubs.
	(fill_prefs_window): Mark the column headers for translation.

2007-11-26  Federico Mena Quintero  <federico@novell.com>

	* clock.c (prefs_locations_changed): Move over from Intlclock.
	(update_orient): Set the angle of the temperature label.

2007-11-26  Federico Mena Quintero  <federico@novell.com>

	* clock.c (fill_prefs_window): Move over from Intlclock with its
	helper functions.

2007-11-26  Federico Mena Quintero  <federico@novell.com>

	* clock.c (display_properties_dialog): Set the screen of the
	preferences window before presenting it.

	* clock.glade: Add back the Location page to the preferences
	dialog.  Add the Edit Location and Find Location dialogs.  Make
	the preferences window a GtkDialog, with "center" for the position
	hint.

2007-11-26  Federico Mena Quintero  <federico@novell.com>

	* clock.c (verb_display_properties_dialog): Renamed from
	display_properties_dialog().
	(display_properties_dialog): Match the prototype from intlclock;
	move the code from there.
	(ensure_prefs_window_is_created): Move the code from intlclock;
	with a bunch of stub functions.
	(struct _ClockData): Add a bunch of fields for the preferences
	dialog.

2007-11-26  Federico Mena Quintero  <federico@novell.com>

	* clock.c (struct _ClockData): Removed tz_toggle, tz_arrow,
	tz_popup, tz_list, show_tz, show_tz_check.  The code in Intlclock
	is much better; we'll restore the timezone code from there.
	(KEY_SHOW_ZONES): Removed.
	(*): Remove the tz-related functions.

	* clock.schemas.in: Remove these schemas:
	/schemas/apps/clock_applet/prefs/show_timezones
	/schemas/apps/clock_applet/prefs/timezones/tz_id_list
	/schemas/apps/clock_applet/prefs/timezones/timezone_name
	/schemas/apps/clock_applet/prefs/timezones/timezone_zone

2007-11-22  Federico Mena Quintero  <federico@novell.com>

	* clock.c (create_clock_widget): Create the weather widgets.

2007-11-22  Federico Mena Quintero  <federico@novell.com>

	* clock.c (struct _ClockData): Rename "obox" to "main_obox".  Add
	a "weather_obox" field.
	(create_clock_widget): Use the new container names, and clean up
	this function a little.
	(applet_change_orient): Factor out a ton of duplicated code.

2007-11-22  Federico Mena Quintero  <federico@novell.com>

	* clock.c (struct _ClockData): Replace field "toggle" with
	"panel_button".  Rename this throughout the code.
	(force_no_focus_padding): Make the "first_time" variable static;
	otherwise it's useless.

2007-11-22  Federico Mena Quintero  <federico@novell.com>

	* clock.c (speed_unit_changed): Move from intlclock.
	(update_speed_combo): Likewise.

2007-11-22  Federico Mena Quintero  <federico@novell.com>

	* clock.c (temperature_unit_changed): Move from intlclock.
	(update_temperature_combo): Likewise.
	(update_weather_locations): Just a stub for now.

2007-11-22  Federico Mena Quintero  <federico@novell.com>

	* clock.c (parse_and_set_temperature_string): Renamed from
	parse_temperature_string().  Move the code from intlclock.
	(parse_and_set_speed_string): Likewise.
	(temp_unit_enum_map): Moved from intlclock.
	(speed_unit_enum_map): Moved from intlclock.
	(WeatherForecastType, TempUnit, SpeedUnit, PressureUnit,
	DistanceUnit): Temporarily cut&pasted from libgweather, until it
	becomes a standalone library.

2007-11-22  Federico Mena Quintero  <federico@novell.com>

	* clock.c (show_weather_changed): Implement.
	(show_temperature_changed): Implement.
	(struct _ClockData): New fields panel_weather_icon,
	panel_temperature_label.
	(update_panel_weather): Moved over from intlclock.

2007-11-21  Federico Mena Quintero  <federico@novell.com>

	This begins the merge of the Intlclock applet into the gnome-panel clock.

	* clock.glade: New Glade file for the clock's preferences dialog
	and the set-time dialog.

	* clock.c (struct _ClockData): New field glade_xml, to keep our
	Glade data.  New fields show_weather, show_temperature for preferences.
	(fill_clock_applet): Load the Glade data.
	(setup_gconf): Make this easier to change by using a running count
	of listeners, instead of hardcoding each listener's index within
	the array.
	(KEY_SHOW_WEATHER, KEY_SHOW_TEMPERATURE, KEY_CITIES,
	KEY_TEMPERATURE_UNIT): New GConf keys.
	(setup_gconf_preference): New helper function; factored out from
	setup_gconf().
	(setup_gconf): Use setup_gconf() instead of duplicating lots of
	code.  Add listeners for the new GConf keys.
	(load_gconf_settings): New function; move the code from
	fill_clock_applet().  Also load the new GConf keys.

==================== 2.20.1 ====================

==================== 2.20.0.1 ====================

==================== 2.20.0 ====================

2007-09-09  Vincent Untz  <vuntz@gnome.org>

	Don't show the UI to have timezones in the clock since it's not ready.

	* clock.c: (set_show_zones_cb)
	(display_properties_dialog): comment code

2007-09-09  Vincent Untz  <vuntz@gnome.org>

	Fix various small insanities :-)
	Fix crash reported as bug #457359.

	* tz.c:
	(tz_free_db): small change in for loop
	(tz_build_db): never return NULL, don't add a false NULL pointer at the
	end
	(tz_get_system_timezone): make sure that various variables are not
	NULL when they shouldn't

==================== 2.19.92 ====================

==================== 2.19.6 ====================

2007-07-26  Jaap Haitsma  <jaap@haitsma.org>

	* GNOME_ClockApplet.xml:
	Use gtk-about icon i.s.o. deprectated gnome-stock-about
	Fixes bug #457148

2007-07-18  Pascal Terjan  <pterjan@linuxfr.org>

	* timezone.glade: Set correct response_id

2007-07-18  Pascal Terjan  <pterjan@linuxfr.org>

	* tz.c: (tz_get_system_timezone): fix a crash when /etc/localtime is
	not a hardlink

2007-07-11  Vincent Untz  <vuntz@gnome.org>

	* tz.c: (tz_build_db), (tz_get_system_timezone_solaris): trivial fixes
	for compilation on Solaris. Fix bug #455921.
	Patch by Damien Carbery <damien.carbery@sun.com>

2007-07-11  Vincent Untz  <vuntz@gnome.org>

	* timezone.glade: don't mark icons as translatable (bug in glade-3)
	Fix bug #455864. Patch by Luca Ferretti <elle.uca@libero.it>

2007-07-11  Vincent Untz  <vuntz@gnome.org>

	* e-map/Makefile.am: add -fPIC
	Fix bug #455034. Thanks Saleem Abdulrasool <compnerd@gentoo.org>

2007-07-11  Vincent Untz  <vuntz@gnome.org>

	* e-map/e-map.c: (e_map_realize), (e_map_size_allocate),
	(e_map_remove_point), (update_and_paint), (load_map_background),
	(update_render_pixbuf), (zoom_in_smooth), (zoom_in), (zoom_out):
	sync with gnome-system-tools

==================== 2.19.5 ====================

2007-07-08  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: dist the glade file

2007-07-07  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (display_about_dialog): use program-name instead of name
	property for GtkAboutDialog.
	Fix bug #438903.
	* tz.c: remove useless include

2007-07-06  Vincent Untz  <vuntz@gnome.org>

	* clock-utils.c: include config.h
	Fix bug #454299 (12-hour setting not working anymore)
	* clock.c: remove useless include
	* timezone.glade: add a shadow for the map

2007-07-05  Vincent Untz  <vuntz@gnome.org>

	Add support for timezones. This needs some more work and testing on
	various OS. I'm not sure the tz.c part work well outside of Linux, eg.
	Fix bug #88754.

	* Makefile.am: add new files, and other updates needed for this commit
	* calendar-window.c: make gconf keys #define
	(calendar_window_destroy): unref the gconf client
	* calendar-window.h: small update
	* clock-utils.[ch]: new file, containing some common code:
	clock_locale_format() and clock_utils_display_help()
	* clock.h: small update
	* clock.c: make gconf keys #define
	(set_tooltip): kill
	(update_clock): update the tz popup too with the new time
	(update_tooltip): use gtk_widget_set_tooltip_text()
	(destroy_clock): updated
	(close_on_escape): make a bit more generic
	(delete_event): ditto
	(clock_locale_format): moved to clock-utils.c
	(create_calendar): updated
	(create_tz): new
	(position_calendar_popup): updated to be a bit more simple
	(position_tz_popup): new
	(present_calendar_popup): killed
	(update_calendar_popup): renamed from update_popup, close the tz popup
	if it's open
	(update_tz_popup): new, based on update_calendar_popup()
	(toggle_calendar): updated
	(toggle_timezone): new
	(toggle_timezone_shown): new
	(toggle_timezone_hidden): new
	(create_clock_widget): updated, and added the obox and the tz toggle
	(applet_change_orient): change obox orientation and the direction of
	the arrow in the tz toggle
	(format_changed): updated
	(gmt_time_changed): updated
	(show_week_changed): updated
	(show_tz_changed): new
	(setup_gconf): add new listener
	(fill_clock_applet): updated
	(set_show_zones_cb): new
	(properties_response_cb): use clock_utils_display_help()
	(display_properties_dialog): updated for the new checkbox
	(display_help_dialog): use clock_utils_display_help()
	* clock.schemas.in: add new show_timezones and timezones/tz_id_list
	keys
	* e-map/*: e-map code, taken from evolution/gnome-system-tools
	* obox.[ch]: new, stolen from the notification area
	* tz-list.[ch]: new, handles configuration related to the timezones.
	* tz-sel-dialog.[ch]: new, a dialog to handle timezone configuration
	* timezone.glade: new, glade file for the timezone configuration
	dialog
	* tz-window.[ch]: new, a popup similar to the calendar popup showing
	selected timezones
	* tz.[ch]: new, read timezone information from the OS. It's based on
	code taken from anaconda/evolution/gnome-system-tools. The data is
	shared among all instances in the process.

2007-06-27  Ross Burton  <ross@openedhand.com>

	* calendar-window.c:
	Sort completed tasks last, treat unprioritised tasks as normal
	priority, and fall back on sorting by summary. (#451546).

2007-06-26  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: add LIBPANEL_APPLET_CFLAGS to make compilation work. It
	seems some pkgconfig file changed, and we didn't have the bonobo
	headers anymore...

==================== 2.19.4 ====================

2007-06-14  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (set_tooltip): migrate to GtkTooltip
	(update_clock): move tooltip code to its own function
	(update_tooltip): s/view/hide/ in the tooltip if the calendar window
	is opened
	(update_popup): update the tooltip

2007-06-14  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: make more code depend on libecal. Should fix
	compilation issues. Fix bug #443788

2007-06-14  Vincent Untz  <vuntz@gnome.org>

	* calendar-sources.c: (backend_died_cb): use g_timeout_add_seconds()

==================== 2.19.3 ====================

2007-05-25  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: remove old code handling icons, and directly use the
	e-d-s icons
	* calendar-window.c: (set_renderer_pixbuf_pixmap): new
	(set_renderer_pixbuf_pixmap_for_bday): change path for icons, and use
	set_renderer_pixbuf_pixmap()
	(set_renderer_pixbuf_pixmap_for_weather): ditto
	(calendar_window_tree_selection_changed), (create_task_list),
	(create_list_for_appointment_model), (create_appointment_list),
	(create_birthday_list), (create_weather_list),
	(calendar_window_init): simplify the code to have only one selection

2007-05-21  Sebastien Bacher  <seb128@ubuntu.com>

	* calendar-client.c: (calendar_client_foreach_appointment_day):
	mark multiple days events correctly (Closes: #440184)

2007-05-21  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (calendar_window_tree_selection_changed): new,
	unselect the selection in other treeviews than the newly selected one
	(create_task_list): connect to the selection changed signal
	(create_list_for_appointment_model): ditto
	(create_appointment_list): updated
	(create_birthday_list): ditto
	(create_weather_list): ditto

2007-05-21  Vincent Untz  <vuntz@gnome.org>

	* calendar-window.c: (format_time): don't check that the time format
	is CLOCK_FORMAT_12 or CLOCK_FORMAT_24 and just assume it is.
	(calendar_window_class_init): initialize time format with
	clock_locale_format()
	(calendar_window_set_time_format): if new time format is not
	CLOCK_FORMAT_12 or CLOCK_FORMAT_24, then set it with
	clock_locale_format()

2007-05-21  Vincent Untz  <vuntz@gnome.org>

	Move the calendar popup code in a new file.
	Implement saving of the state of appointment expanders in gconf.

	* Makefile.am: add new files, generate clock-typebuiltins.[ch]
	* calendar-window.[ch]: new GtkWindow-derived widget, that implements
	the calendar popup. Based on code from clock.c (which has been of
	course removed)
	* clock.h: new, with stuff from clock.c needed by CalendarWindow
	* clock.schemas.in: add new gconf keys for the state of expanders
	* clock.c: (destroy_clock): remove now unneeded code
	(create_calendar): simplify, now only creates a CalendarWindow
	(update_popup): updated
	(format_changed): update CalendarWindow
	(gmt_time_changed): update CalendarWindow
	(show_week_changed): update CalendarWindow
	(fill_clock_applet): updated

2007-05-20  Vincent Untz  <vuntz@gnome.org>

	Have separate treeviews for appointments, birthdays and weather.
	Use GtkExpander to let the user hide them.
	Fix most of bug #165732
	Based on patch by Priit Laes <amd@store20.com>

	* Makefile.am: prepare for installation of some icons, even if we
	don't install some right now. This might get reverted later.
	* calendar-client.[ch]: (get_source_uri): new
	(calendar_appointment_equal): take into account the uri
	(calendar_appointment_copy): ditto
	(calendar_appointment_finalize): ditto
	(calendar_appointment_init): ditto
	* clock.c: (destroy_clock): updated for new treeviews
	(is_appointment): new
	(is_birthday): new
	(is_weather): new
	(create_hig_frame): kill
	(set_renderer_pixbuf_pixmap_for_bday): new
	(set_renderer_pixbuf_pixmap_for_weather): new
	(appointment_pixbuf_cell_data_func): small update
	(birthday_pixbuf_cell_data_func): new
	(weather_pixbuf_cell_data_func): new
	(clock_expander_activated): new
	(create_task_list): use a GtkExpander instead of a frame
	(handle_appointments_changed): small update
	(create_list_for_appointment_model): new, mostly based on
	create_appointment_list(), but with a GtkExpander and made more
	generic
	(create_appointment_list): call create_list_for_appointment_model()
	(create_birthday_list): new
	(create_weather_list): new
	(add_appointments_and_tasks): updated
	(update_popup): updated
	(fill_clock_applet): updated

==================== 2.19.2 ====================

2007-05-13  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (clock_set_timeout): add a time_t parameter so we don't
	call time() multiple times, improve a bit the timeout for internet
	time. It's still not good when seconds are shown.
	(clock_timeout_callback): updated
	(refresh_clock_timeout): updated

2007-05-13  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (clock_timeout_callback), (update_clock), (copy_time):
	convert the float internet time to unsigned int, so there's no
	rounding error when displaying it.
	Fix part of bug #410542

2007-05-13  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (clock_set_timeout): add a useful comment

2007-05-13  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (clock_set_timeout): timeout is one second for UNIX
	Fix bug #383107

2007-05-08  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: add new define CLOCK_TIME_UTILITY in compile line
	* clock.c: stop hardcoding the various utilities out there to setup
	the time and date and use the one passed in configure
	Fix bug #436837

2007-05-08  Vincent Untz  <vuntz@gnome.org>

	* clock.schemas.in: show date by default because it seems the majority
	of people are weird and are not like me.

2007-05-02  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (display_properties_dialog): reset custom_format_shown to
	FALSE.
	Patch by Jamie Fox <launchpad@jamiefox.me.uk>
	* clock.schemas.in: add a reference to the strftime manual
	Fix bug #413114

2007-05-01  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (on_config_tool_exited): new, updates the clock when the
	config tool exits
	(try_config_tool): add a watch on the child
	(config_date): updated
	Fix bug #425910. Patch by Ray Strode <rstrode@redhat.com>

2007-04-13  Ross Burton  <ross@openedhand.com>

	* calendar-client.c:
	Check for STATUS=COMPLETED, meaning 100% complete. This fixes
	display of items marked as completed in Tasks (#416120).

==================== 2.18.1 ====================

==================== 2.18.0 ====================

2007-03-05  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (update_clock): don't free a static variable, and fix a
	potential bug when we have an invalid markup because of strftime.
	Fix bug #413447.
	Based on patch by Sébastien Bacher <seb128@debian.org>

==================== 2.17.92 ====================

2007-02-21  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (clock_set_timeout): new function, set the timeout to
	update the clock and don't use a timeout of 1 second when we don't
	show the seconds
	(clock_timeout_callback): call clock_set_timeout() instead of
	continuing with the same timeout
	(refresh_clock_timeout): simply call clock_set_timeout()
	Based on patch by Matthias Clasen <mclasen@redhat.com>
	Fix bug #348749

2007-02-21  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (get_updated_timeformat): copied from update_timeformat(),
	but contains code to add gravity around the time
	(update_timeformat): call get_updated_timeformat() twice: once to get
	the format with the markup, and once to get a fallback format without
	markup
	(update_clock): changed the logic a bit, so that we can use pango
	markup, and make sure that we display something if the markup is not
	correct
	(destroy_clock): updated
	(clock_update_text_gravity): new, set the gravity of the label for
	vertical text!
	(force_no_focus_padding): updated, and call
	clock_update_text_gravity() and connect to the screen-changed signal
	to call it again
	Fix bug #409127.
	And, although this is not the goal of this commit, this fixes bug
	#332737.

==================== 2.17.91 ====================

==================== 2.17.90 ====================

2007-01-17  Vincent Untz  <vuntz@gnome.org>

	* calendar-client.c: (get_ical_url): kill
	(calendar_task_equal):
	(calendar_task_copy):
	(calendar_task_finalize):
	(calendar_task_init): remove URL stuff
	* clock.c: (clock_launch_evolution): new, to launch evolution with an
	argument
	(handle_tasks_changed):
	(create_task_list): remove URL stuff
	(task_activated_cb): launch evolution with the task uid
	(calendar_day_activated): updated to use clock_launch_evolution()
	Based on patch by Nickolay V. Shmyrev <nshmyrev@yandex.ru>
	Fix bug #162305

2007-01-17  Vincent Untz  <vuntz@gnome.org>

	* clock.c: add ifdef for langinfo.h
	(clock_locale_format): add ifdef for nl_langinfo
	Fix bug #394893

2007-01-17  Vincent Untz  <vuntz@gnome.org>

	* calendar-client.c: (calendar_client_foreach_appointment_day): don't
	mark multiple days on the calendar if the event is an all day meeting.
	Fix bug #382754

2007-01-17  Vincent Untz  <vuntz@gnome.org>

	* calendar-client.c: (calendar_client_foreach_appointment_day): make
	sure that the last day of a multi-day events is marked.
	Fix bug #305022
	Patch by Michael Frank <msfrank@syntaxjockey.com>

2007-01-06  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (calendar_day_activated): don't do anything if we can't
	find the evolution binary

==================== 2.16.2 ====================

==================== 2.16.1 ====================

==================== 2.16.0 ====================

2006-09-04  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (calendar_day_activated): initialize error to NULL
	Fix crash #340622

==================== 2.15.92 ====================

2006-08-12  Vincent Untz  <vuntz@gnome.org>

	* Makefile.am: install in-process library in $(libdir)/gnome-panel
	Fix bug #351042

2006-08-11  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (format_time): convert from locale to UTF-8

2006-08-08  Vincent Untz  <vuntz@gnome.org>

	Only consider the size of the toggle button since it's what is
	interesting (size of the applet is useless)

	* clock.c: (calculate_minimum_width): take only one argument (the
	toggle button)
	(calculate_minimum_height): use the toggle button and not the applet
	as basis of the math
	(update_orient): ditto
	(applet_change_pixel_size): renamed to toggle_change_pixel_size()
	(fill_clock_applet): connect to size_allocate of the toggle button,
	not of the applet

2006-08-08  Vincent Untz  <vuntz@gnome.org>

	* GNOME_ClockApplet_Factory.server.in.in:
	* Makefile.am: make it possible to compile as an in-process applet
	* clock.c: ditto, and set icons for all dialogs since the default icon
	can only be set if the applet is out of process, also remove useless
	includes

==================== 2.15.91 ====================

2006-08-08  Vincent Untz  <vuntz@gnome.org>

	* GNOME_ClockApplet_Factory.server.in.in: icon name change

2006-08-08  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (fill_clock_applet):
	(display_about_dialog): updates for icon name change

2006-08-07  Vincent Untz  <vuntz@gnome.org>

	Only display vertical text on vertical panels when the panel is not
	wide enough for horizontal text.
	Based on patch by Adam Sjøgren <asjo@koldfront.dk>
	Fix bug #318377

	* clock.c: (calculate_minimum_width): new
	(update_clock): update orientation
	(create_clock_widget): don't initialize orientation
	(update_orient): new, does the work
	(applet_change_orient): don't change orientation of the text. And
	don't do anything if the orientation is the same :-)
	(applet_change_pixel_size): update to not do anything if the whole
	allocation is the same (and not only the width/height depending on
	orientation)
	(fill_clock_applet): beautification update

2006-07-28  Vincent Untz  <vuntz@gnome.org>

	* GNOME_ClockApplet_Factory.server.in.in: update bugzilla stuff
	* Makefile.am: also fill the version in the server file

==================== 2.15.90 ====================

==================== 2.14.2 ====================

2006-05-29  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (display_about_dialog): destroy the about dialog on
	response. Fix bug #341517

2006-04-20  William Jon McCann  <mccann@jhu.edu>

	* calendar-client.h: add rid field for events

	* calendar-client.c (get_ical_rid): new function to extract the
	recurrence id of an event
	(calendar_event_get_uid): make the "uid" for events include the
	rid to uniquely determine instances
	(calendar_client_handle_query_result): take a GList not a GSList;
	use the new "full" uid above in case we are sent instances without
	a master recurring event
	(check_object_remove): call back to iterate over all keys to match
	a master uid
	(calendar_client_handle_objects_removed): take a GList not a
	GSList; the list is ECalComponentId structs; compare "full" uid
	when we get a recurrence id and
	(calendar_client_start_query): we dupe the key string now so free
	it on exit
	(calendar_client_update_appointments): occur-in-time-range does
	take recurrences into account

	Patch from JP Rosevear <jpr@novell.com>
	Fixes #339061

==================== 2.14.1 ====================

2006-03-25  Vincent Untz  <vuntz@gnome.org>

	* calendar-client.c: (calendar_event_new): print the value of the
	unknown type. It's useful to know what it was :-)
	(calendar_client_handle_query_result): don't crash if
	calendar_event_new() returns NULL
	Fix bug #333223

	* calendar-client.[ch]: (calendar_client_launch_editor): kill

	* clock.c: (calendar_day_activated): launch evolution on the clicked
	day for appointments
	Based on patch by Tollef Fog Heen <tfheen@ubuntu.com>
	Partial fix for bug #162305

	* clock.c: (try_config_tool): don't leak the error

2006-03-25  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (compare_tasks): use -1 as terminator for
	gtk_tree_model_get(). Patch by Mart Raudsepp <leio@dustbite.net>
	Fix bug #334187

2006-03-24  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (display_help_dialog): we don't need a GnomeProgram here
	since we're using the global help files location (see wncklet
	ChangeLog on 2003-04-16 ;-))

==================== 2.14.0 ====================

==================== 2.13.91 ====================

==================== 2.13.90 ====================

2006-01-22  Vincent Untz  <vuntz@gnome.org>

	Don't offer the 12-hour format to the user if his locale don't support
	it (strftime("%p") == ""). Fix bug #320156

	* (format_changed): check if we support AM/PM and if we don't and it's
	the new format, just use 24-hour as format
	(fill_clock_applet): ditto
	(set_format_cb): small tweak for when we don't support AM/PM
	(display_properties_dialog): don't show the 12-hour option if we don't
	support AM/PM, small tweak when initialize the current value

2006-01-22  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (applet_change_pixel_size): updated so that it's a
	size-allocate callback, and don't do anything if the size didn't
	change
	(fill_clock_applet): fix typo in a comment, connect to size-allocate
	instead of change_size
	Fix bug #325063

==================== 2.13.5 ====================

==================== 2.13.4 ====================

2005-12-30  Vincent Untz  <vuntz@gnome.org>
	
	* clock.schemas.in: don't show the date by default. Fix bug #313524.
	Don't ask translators to localize the default for a deprecated
	setting.

2005-12-28  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (applet_change_background): kill
	(fill_clock_applet): use new libpanel-applet API instead of connecting
	to the change_background signal

2005-12-19  Vincent Untz  <vuntz@gnome.org>

	* clock.c: rename compare_priority() to compare_tasks()
	(compare_tasks): sort by due date if priorities are the same
	Patch by kraai@ftbfs.org

2005-12-19  William Jon McCann  <mccann@jhu.edu>

	* clock.c (task_activated_cb): Make task activation work correctly
	for filtered model.  Fixes #324503.

==================== 2.13.3 ====================

2005-11-19  Vincent Untz  <vuntz@gnome.org>

	* clock.c: really revert the changes. I don't know why the commit
	didn't work...

==================== 2.13.2 ====================

2005-11-03  Vincent Untz  <vuntz@gnome.org>

	* clock.c: revert the orientation changes since the panel change has
	been reverted.

==================== 2.13.1 ====================

2005-10-24  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (add_appointments_and_tasks):
	(create_calendar):
	(position_calendar_popup): same for up and down...

2005-10-24  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (position_calendar_popup):
	(create_clock_widget):
	(applet_change_orient): right and left orientation were inverted in
	the panel before. Update here so that it works as expected.

2005-10-23  Vincent Untz  <vuntz@gnome.org>

	* clock.c: (handle_appointments_changed): don't use deprecated
	functions that don't do anything anymore

==================== 2.12.1 ====================

2005-10-03  Vincent Untz  <vuntz@gnome.org>

	Use authentication for calendar sources. Patch by Tommi Komulainen
	<tommi.komulainen@iki.fi>. Fix bug #317095.

	* calendar-sources.c: (auth_func_cb): new, stolen from evo
	(load_esource): add a callback for authentication

2005-10-03  Vincent Untz  <vuntz@gnome.org>

	* clock.schemas.in: show weeks by default.
	Fix bug #167753.

2005-09-15  William Jon McCann  <mccann@jhu.edu>

	* clock.c (calculate_minimum_height, use_two_line_format) 
	(update_timeformat, update_clock, create_clock_widget) 
	(applet_change_orient): Orient the text vertically on
	vertical panels.  Only use multiple lines when there
	is enough space two fit two lines.
	
	Based on patches from John Spray <jcs116@york.ac.uk>
	and Callum McKenzie <callum@physics.otago.ac.nz>
	Fixes #313807.

==================== 2.12.0 ====================

==================== 2.11.92 ====================

2005-08-10  Mark McLoughlin  <mark@skynet.ie>

	Fix broken "Adjust Date & Time",
	https://bugzilla.redhat.com/165586

	* clock.c: (try_config_tool): us G_SPAWN_SEARCH_PATH
	because yast is the only tool which has its full
	path specified.

==================== 2.11.91 ====================

==================== 2.11.90 ====================

2005-07-21  Mark McLoughlin  <mark@skynet.ie>

	Fix warning and some logic errors.

	* clock.c:
	(try_config_tool): return FALSE if argv parsing
	failed; simplify logic.
	(check_config_tool_command): rename, don't take
	ClockData as an arg; return boolean to indicate
	success rather than the command line (warning was
	here); return FALSE if argv parsing failed; simplify
	logic.
	(fill_clock_applet): upd. for above changes and
	simplify logic.

2005-07-21  Vincent Untz  <vuntz@gnome.org>

	* clock.c: declare clock_check_config_tool() so that it compiles
	(fill_clock_applet): kill warning
	Fix bug #311014

2005-07-19  Rodrigo Moya <rodrigo@novell.com>

	* clock.c: added support for SuSE's YAST datetime config tool.
	(try_config_tool): support command lines with arguments.
	(clock_check_config_tool): new function to look for the tools
	correctly, even if the command line has arguments.
	(fill_clock_applet): use clock_check_config_tool to look for the
	configuration tool.
	(config_tool_changed): check the value entered by the user before
	using it.

2005-07-15  Rodrigo Moya <rodrigo@novell.com>

	* clock.c (update_clock): only show the date in the tooltip if the applet
	is set up to not display the date. If set to display it, use informative
	messages.

==================== 2.11.5 ====================

==================== 2.11.4 ====================

==================== 2.11.3 ====================

2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* clock.c (compare_priority, handle_tasks_changed) 
	(create_task_list): 
	* calendar-client.[ch] (get_ical_priority, calendar_task_equal) 
	(calendar_task_copy, calendar_task_init): 
	Sort task list by priority.

	Based on patch by Carlos Garcia Campos <carlosgc@gnome.org>
	Fixes #166450.
	
==================== 2.11.1 ====================

==================== 2.10.0 ====================

==================== 2.9.92 ====================

2005-02-26  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (applet_change_background): don't leak the style

2005-02-19  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (clock_timeout_callback): fix update of the clock to happen
	every minute and not every second when we don't show seconds

2005-02-09  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (display_about_dialog): simplify.
	Patch by Luca Ferretti <elle.uca@libero.it>
	Fix bug #166766

==================== 2.9.91 ====================

2005-02-02  Mark McLoughlin  <mark@skynet.ie>

	* clock.schemas.in: add comment from Christian Rose
	properly explaining how to translate the clock format.

==================== 2.9.90 ====================

==================== 2.9.4 ====================

2005-01-10  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (fill_clock_applet): remove FIXME

==================== 2.9.3 ====================

==================== 2.9.2 ====================

2004-11-28  Vincent Untz  <vincent@vuntz.net>

	Add a gconf key to show/hide the week numbers in the calendar. It's
	not exposed in the UI. Fix bug #147565.

	* clock.c: (create_calendar): only show the week numbers if it's
	configured this way
	(show_week_changed): new, update the configuration and the calendar
	if it's open
	(setup_gconf): new listener for the new gconf key
	(fill_clock_applet): init the configuration for the week numbers
	* clock.schemas.in: add the show_week_numbers key

2004-11-17  Vincent Noel  <vnoel@cox.net>

	* clock.c (handle_task_percent_complete_edited): When entering
	percentages for actions, accept percentage signs and spaces in the
	entered string.

2004-11-11  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: don't include spaces in the factories "name" argument.

2004-11-11  Vincent Untz  <vincent@vuntz.net>

	* GNOME_ClockApplet_Factory.server.in.in: use the right icon for the
	applet

==================== 2.9.1 ====================

2004-11-06  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (applet_change_background): better background support,
	code is shamelessly stolen from the trash applet

2004-11-04  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (create_task_list): stop using egg_cell_renderer_text since
	we can ellipsize the GtkCellRendererText now
	(create_appointment_list): ditto
	* Makefile.am:
	* cut-n-paste/: kill

2004-11-01  Vincent Untz  <vincent@vuntz.net>

	* clock.c: stop including everything from libgnome and libgnomeui
	(task_activated_cb): show url on right screen

2004-10-29  Marco Pesenti Gritti  <marco@gnome.org>

	reviewed by: Vincent Untz  <vincent@vuntz.net>

	* clock.c: (clock_timeout_callback), (update_clock),
	(refresh_clock_timeout):

	Emit the timeout every second (or internet second) but only
	update the clock when necessary. Fix 156796.

2004-10-28  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (fill_clock_applet): use the clock icon from the icon theme
	(display_about_dialog): ditto

2004-10-27  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (fill_clock_applet) set default icon here
	(display_properties_dialog): remove old code for icon
	(display_about_dialog): ditto, and port to GtkAboutDialog, and move to
	translator-credits

2004-10-20  William Jon McCann  <mccann@jhu.edu>

	Fix for bug #139955.
	
	* clock.c (handle_tasks_changed, handle_appointments_changed):
	Don't re-position the popup here allow the window gravity to do
	the right thing.
	(position_calendar_popup): Set the window gravity after the
	initial positioning.

==================== 2.8.0.1 ====================

2004-09-27  Mark McLoughlin  <mark@skynet.ie>

	* clock.c:
	(force_no_focus_padding): hackily force the button
	not to have any focus padding and let the focus
	indication be drawn on the label itself when space
	is tight. Fixes bug #147999.

==================== 2.8.0 ====================

==================== 2.7.92.1 ====================

2004-08-31  Mark McLoughlin  <mark@skynet.ie>

	* calendar-client.c: (calendar_client_launch_editor): use
	"evolution -c calendar" rather than "evolution-1.5 -c OAFIID:.."
	to launch calendar/tasks.

==================== 2.7.92 ====================

2004-08-24  Kjartan Maraas  <kmaraas@gnome.org>

	* calendar-client.c: (calendar_client_update_tasks),
	(calendar_client_select_day): s/#if/#ifdef 

==================== 2.7.91.1 ====================

2004-08-17  William Jon McCann  <mccann@jhu.edu>

	* clock.c (constrain_list_size): Allow space for shadow.
	Fixes #150343.

2004-08-17  Mark McLoughlin  <mark@skynet.ie>

	* calendar-client.c: (get_ical_is_all_day): fix silly
	type-punned pointer warning.
	
	* calendar-sources.c: (calendar_sources_get): ditto.

==================== 2.7.91 ====================

2004-08-10  Mark McLoughlin  <mark@skynet.ie>

	* clock.schemas.in: add some comments for translators
	of the default value for the "format" and "hour_format"
	keys.

==================== 2.7.90 ====================

2004-08-09  Mark McLoughlin  <mark@skynet.ie>

	* GNOME_ClockApplet_Factory.server.in.in: remove the
	panel:category attribute.

2004-07-27  William Jon McCann  <mccann@jhu.edu>

	Fix for bug #148137.
	
	* calendar-client.c (calendar_client_config_get_timezone)
	(calendar_client_config_get_icaltimezone, calendar_client_set_timezone)
	(calendar_client_timezone_changed_cb):
	New functions to get and set the default timezone from the
	Evolution GConf configuration.
	(calendar_client_init, calendar_client_finalize):
	Add and remove GConf listeners for timezone changes.
	(difftm, get_utc_offset, adjust_all_day): Removed functions.
	(get_time_from_property, get_ical_start_time, get_ical_end_time)
	(get_ical_is_all_day, get_ical_due_time)
	(get_ical_completed_time, calendar_appointment_init)
	(calendar_appointment_generate_ocurrences, calendar_task_init)
	(calendar_event_new, calendar_event_generate_ocurrences)
	(calendar_client_handle_query_result, calendar_client_set_task_completed):
	Use default time zone for floating times and dates.
	(filter_appointment, calendar_client_foreach_appointment_day):
	Removed unneed adjust_all_day() call.

Mon Jul 19 17:18:17 2004  Jonathan Blandford  <jrb@gnome.org>

	* clock.c (create_appointment_list): use SHADOW_IN

	* clock.c (create_task_list): Use SHADOW_IN

==================== 2.7.4.1 ====================

==================== 2.7.4 ====================

2004-07-19  William Jon McCann  <mccann@jhu.edu>

	* clock.c (handle_tasks_changed)
	(set_renderer_pixbuf_color_by_column)
	(task_pixbuf_cell_data_func, appointment_pixbuf_cell_data_func)
	(create_task_list, handle_appointments_changed)
	(create_appointment_list): Display source color, if available, as
	a small pixbuf in the first column.  This is consistent with the
	method finally decided on in Evolution.

	* calendar-client.c (get_source_color)
	(calendar_appointment_equal, calendar_appointment_copy)
	(calendar_appointment_finalize, calendar_appointment_init)
	(calendar_task_equal, calendar_task_copy)
	(calendar_task_finalize, calendar_task_init, calendar_event_new)
	(calendar_client_handle_query_result): Add source color string to query
	results.  To do this we have to pass the source into the init methods.

2004-07-19  William Jon McCann  <mccann@jhu.edu>

	* clock.c (update_popup): Fix #120855 better.  Make present call
	after window is positioned.

2004-07-17  William Jon McCann  <mccann@jhu.edu>

	* clock.c (update_popup): Refilter tasks when popup is updated.
	(clock_timeout_callback): Remove tasks filtering from timeout.
	Based on patch from Carlos Garnacho Parro.  Fixes #142541.

2004-07-17  William Jon McCann  <mccann@jhu.edu>

	* clock.c (update_popup): Present the calendar window after
	it is created.  This causes gtk_window_present to be called
	twice, which ensures the window gets focus.  Fixes #120855.

==================== 2.7.3 ====================

2004-06-21  Mark McLoughlin  <mark@skynet.ie>

	Patch from Greg Hudson <ghudson@mit.edu> in bug #144612.

	* clock.c: (copy_time), (copy_date): make "Adjust Date & Time"
	update the PRIMARY selection as well as CLIPBOARD.

2004-06-09  Christian Neumair  <chris@gnome-de.org>

	* clock.schemas.in: trivial - capitalize all references to the term
	internet; except gconf key values of course. Fixes #135854.

==================== 2.7.1 ====================

2004-06-02  Mark McLoughlin  <mark@skynet.ie>

	Fix for bug #138881 - clock takes up too much width when
	you resize the panel such that the clock displays on
	two rows.

	* clock.c:
	(applet_change_orient), (applet_change_pixel_size): unfix
	the cached size when the orientation or size changes.

2004-05-27  Carlos Garnacho Parro  <carlosg@gnome.org>

	* clock.c: (handle_task_completed),
	(handle_task_percent_complete_edited): made it to edit the correct
	row when there are filtered tasks in the tasks list. Closes bug
	#142539

2004-05-26  William Jon McCann  <mccann@jhu.edu>

	* clock.c (handle_tasks_changed, task_activated_cb) 
	(create_task_list): Open URL when task is activated until we
	have a task editor interface.

	* calendar-client.[ch] (get_ical_url, calendar_task_equal) 
	(calendar_task_copy, calendar_task_finalize, calendar_task_init):
	Add support for task URLs.

	Fixes bug #138567.

2004-05-26  William Jon McCann  <mccann@jhu.edu>

	* clock.c (format_time, handle_appointments_changed): If the event
	did not start on the current day then display the start date in
	the most abbreviated form.
	
	* calendar-client.c (difftm, get_utc_offset):
	Determine the offset from UTC.
	(adjust_all_day): Apply UTC offset to local time if event is all day.
	(get_ical_is_all_day): If the event starts on a day (as opposed to
	a time) then it is an all day event.  Also return true for events
	with duration of exact multiples of the length of a day.
	(calendar_client_get_date): New function.
	(calendar_client_foreach_appointment_day): 
	(filter_appointment): Add support for multiple day events.  To do
	this the appointment filter had to be changed to include another
	case besides the one where a time window encompassed an event.  It
	now includes events that start before or at the start of the
	filter time window and end after the start of the filter time
	window.
	(calendar_client_set_task_completed): Fix typo.

	For example: a repeated event that spans a month boundary or a
	long event that spans more than one day.

	Fixes bug #134931.

2004-05-26  William Jon McCann  <mccann@jhu.edu>

	* calendar-sources.c (backend_died_cb) 
	(calendar_sources_load_esource_list): Reload clients when backend dies.
	(backend_restart): Reload backends after a timeout to avoid restarting
	too fast or more times than necessary for each backend.
	(calendar_sources_finalize_source_data): Remove timeout.
	(calendar_sources_init): Initialize timeout_id.

	* calendar-sources.c (calendar_sources_load_esource_list):
	Compare client lists before resetting source list and emitting
	changed signal.

	Fixes bug #138530
	
2004-05-13  Jorn Baayen  <jbaayen@gnome.org>

	* clock.c: (create_calendar):

	Use GTK_SHADOW_OUT rather than GTK_SHADOW_ETCHED_IN, this makes
	more sense from a "3D perspective".

2004-03-23  Shakti Sen <shprasad@novell.com>

	* clock.c (destroy_clock): Destroying the calender if the clock is
	removed form the panel.
	Fixes bug #137655
	
==================== 2.6.1 ====================

2004-04-05  Mark McLoughlin  <mark@skynet.ie>

	* clock.schemas.in: translate the clock_format default
	in en_US correctly.

==================== 2.6.0 ====================

==================== 2.5.93 ====================

2004-03-11  Fernando Herrera  <fherrera@onirica.com>

	* clock.c: (set_format_cb), (display_properties_dialog):
	Fix bug introduced by the last comit. Now valid values 
	for ClockFormat begin from 1.

2004-03-11  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (fill_clock_applet): don't assume enums
	use a signed representation. Fixes crasher bug #136721.

==================== 2.5.92 ====================

2004-03-05  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (update_properties_for_format), (set_format_cb),
	(display_properties_dialog): port the preferences dialog
	to GtkComboBox. Should fix #136182.

==================== 2.5.91 ====================

2004-03-01  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (update_clock): queue a resize on the toggle
	button when the text changes. Fixes bug #122393.

2004-03-01  Mark McLoughlin  <mark@skynet.ie>

	Based on a patch from Miloslav Trmac <mitr@volny.cz>

	* clock.c: Check for system-config-date which is the new
	name for Fedora's date and time tool. RH bug #116495.

2004-02-25  William Jon McCann  <mccann@jhu.edu>

	* clock.c (create_task_list, create_appointment_list) 
	(constrain_list_size, add_appointments_and_tasks):
	Fix task and appointment list scrolling.  Fixes #135338.

==================== 2.5.90 ====================

2004-02-22  William Jon McCann  <mccann@jhu.edu>

	* clock.c (handle_appointments_changed): Freeze the calendar
	before marking appointment days.  Fixes #134933.

==================== 2.5.5 ====================

2004-02-16  Mark McLoughlin  <mark@skynet.ie>

	* calendar-client.c: (calendar_client_class_init):
	* cut-n-paste/eggcellrenderertext.c:
	(egg_cell_renderer_text_class_init): Don't mark property
	descriptions for translation as discussed on d-d-l.

==================== 2.5.4 ====================

2004-02-04  William Jon McCann  <mccann@jhu.edu>

	* clock.c (add_appointments_and_tasks): Switch position of appointments
	and events frames when clock is on the bottom.

2004-02-03  William Jon McCann  <mccann@jhu.edu>

	* clock.c (position_calendar_popup): New function.
	(present_calendar_popup): Use new position_calendar_popup.
	(handle_tasks_changed, handle_appointments_changed): Reposition
	window when tasks or appointments are changed.
	(create_calendar): Switch position of calendar and events when
	clock is on the bottom.

2004-02-03  William Jon McCann  <mccann@jhu.edu>

	* calendar-client.c (get_ical_is_all_day): Fix subtraction order
	of start and end times.

2004-01-27  William Jon McCann  <mccann@jhu.edu>

        * clock.c (create_calendar):
        (handle_appointments_changed):  Use UTC time for events if
        preference is set.

2004-01-27  Mark McLoughlin  <mark@skynet.ie>

	Patch from Fernando Herrera  <fherrera@onirica.com>

	* clock.c: (fill_clock_applet): Hide Ajust Time & Date option if no
	config tool is found. Fixes #128247.

2004-01-22  William Jon McCann  <mccann@jhu.edu>

	* calendar-sources.c (calendar_sources_load_esource_list): 
	Emit signal last.  Fix bug where selected calendars get out of sync.
	(CALENDAR_SOURCES_SELECTED_TASK_SOURCES_KEY):
	Correct gconf key location.

2004-01-22  Mark McLoughlin  <mark@skynet.ie>

	* cut-n-paste/eggcellrenderertext.c: (get_layout): don't
	ellipsize the text until after we set the text attributes.

==================== 2.5.3.1 ====================

==================== 2.5.3 ====================

2004-01-13  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (create_task_list), (create_appointment_list),
	(constrain_list_size): disable scrolling until we can
	figure out a non-hacky way to get it working nicely.

2004-01-12  Mark McLoughlin  <mark@skynet.ie>

	Patch to make the calendar popup display your tasks and
	appointments from Evolution. Based on patches from
	William Jon McCann <mccann@jhu.edu> (bug #128283)
	and Martin Grimme  <martin@pycage.de> and
	Christian Kellner  <gicmo@xatom.net> (bug #128704).

	Still in need of work. UI loving, mainly. Small TODO
	list in clock.c.

	* GNOME_ClockApplet_Factory.server.in.in: make the applet
	out of process.
	
	* Makefile.am: build the cut-n-paste subdir, make a binary
	instead of an shlib, build the calendar bits.
	
	* clock.c: add tasks and appointments to the calendar popup.
	
	* calendar-client.[ch]: hide all the book-keeping behind
	a nice API.

	* calendar-debug.h: debugging utils.
	
	* calendar-sources.[ch]: keep track of Evolution's selected
	sources.

	* cut-n-paste/eel-pango-extensions.[ch]: copy eel's method
	for creating a PangoLayout with text ellipsized at a given
	width.
	
	* cut-n-paste/eggcellrenderertext.[ch]: copy GtkCellRendererText
	and add ellipsizing support.

	* cut-n-paste/eggintl.h: i18n support.
	
	* cut-n-paste/eggmarshalers.list: marhsallers.
	
	* cut-n-paste/eggtreeprivate.h: copy bit from gtktreeprivate.h,
	but they're not really used.
	
2004-01-09  Kaushal Kumar  <kaushal.kumar@wipro.com>

	* GNOME_ClockApplet_Factory.server.in.in: Added info for bug-reporting.
	Fix bug #129213.

2004-01-07  Vincent Untz  <vincent@vuntz.net>

	Add a "custom" format: the user can specify a custom format in gconf
	to be used by the clock. UI-wise, the preferences dialog show the
	"custom" stuff only if it's used: it doesn't change anything for
	normal users.
	Fix bug #122601.

	* clock.c: remove some useless trailing spaces.
	(update_timeformat), (update_clock), (copy_time), (copy_date): avoid
	crashes if g_locale_from_utf8 returns NULL for some specified formats
	which will be passed to strftime().
	(format_changed): refresh the timeout when the format is changed. Else
	changing the format to unix from anything else without seconds won't
	make the clock update correctly.
	(update_clock), (refresh_clock_timeout), (destroy_clock), (copy_time),
	(setup_gconf), (fill_clock_applet): some trivial stuff for the custom
	format.
	(custom_format_changed), (set_custom_format_cb): new functions for the
	custom format
	(display_properties_dialog): add widgets to configure the custom
	format and show them only if necessary. Also handle the sensitivity of
	the widgets.
	* clock.schemas.in: add a new custom_format key and modify the long
	description of the format key to reflect the newly available format.

2004-01-06  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (create_calendar): if showing UTC time, select the right
	day (UTC) when showing the calendar widget.
	Fix bug #121636.

2003-12-14  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (update_timeformat) allow translators to change the order
	of the clock format when we're asking them to do so :-) (use
	"%1$s"-like stuff).

2003-12-12  Vincent Untz  <vincent@vuntz.net>

	* clock.schemas.in: s/there is no time zones/there are no time zones/
	Fix bug #129152.

2003-12-11  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: kill gnome-help.h and gnome-url.h includes.

2003-12-10  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (try_config_tool), (properties_response_cb),
	(display_help_dialog): use the new libgnomeui and 
	GDK functions to replace the egg-screen stuff.
	
	* Makefile.am: don't do the libegg thang.
	
	* egg-screen-exec.[ch],
	  egg-screen-help.[ch],
	  egg-screen-url.[ch],
	  update-from-egg.sh: die.

==================== 2.5.2 ====================

2003-12-09  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: distcheck fixes.

2003-12-04  Vincent Untz  <vincent@vuntz.net>

	We now use a string to identify the clock format that will be used.
	This simplifies a bit the code and the schemas. It's much nicer.
	Fix bug #85693.

	* clock.c: (clock_timeout_callback), (update_timeformat),
	(update_clock), (refresh_clock_timeout), (copy_time): updated to use
	the new ClockFormat enum.
	(hour_format_changed), (internet_time_changed), (unix_time_changed):
	kill those functions which are replaced by...
	(format_changed): new function to handle a format change in gconf.
	(setup_gconf): remove listeners for the old keys, add a new one for the
	new key.
	(clock_migrate_to_26): function to migrate the user configuration to
	the new schema.
	(clock_locale_format): new function to isolate the nl_langinfo call.
	(fill_clock_applet): use the new key for the format.
	(set_hour_format_cb), (set_internettime_cb), (set_unixtime_cb): kill
	those functions which are replaced by...
	(set_format_cb): callback when setting the clock format in the pref.
	(display_properties_dialog): updated to use set_format_cb and the new
	format stuff.
	
	* clock.schemas.in: add a format key and describe the hour_format,
	unix_time, internet_time key as deprecated.

2003-11-13  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (update_timeformat) remove leading zero from dates < 10 by
	default. Fix bug #112004.

==================== 2.5.1 ====================

2003-11-11  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: use $(DISABLE_DEPRECATED_CFLAGS).

2003-10-31  Arvind Samptur  <arvind.samptur@wipro.com>

	* Makefile.am: Temporarily disabling the deprecated flags.

2003-10-28  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (create_calendar) show the week numbers in the calendar.
	Fix bug #98711.

2003-10-13  Vincent Untz  <vincent@vuntz.net>

	* clock.schemas.in: better long description for the internet_time key.
	Fix bug #84105.

2003-10-13  Vincent Untz  <vincent@vuntz.net>

	* clock.c: (config_date): don't try running the gconf-specified config
	tool if the string for the tool is a void string. Fix bug #124501.

Mon Sep 15 15:09:46 2003  George Lebl <jirka@5z.com>

	* clock.c: when started with the locked_down flag, hide the
	  preferences menu item

==================== 2.4.0 ====================

==================== 2.3.91 ====================

==================== 2.3.90 ====================

Thu Aug 28 22:04:31 2003  George Lebl <jirka@5z.com>

	* clock.c: Fix mandrake #4948.  When we "unfixed" the
	  size, we forgot to queue resize high enough in the
	  tree now that there is an alignment.  queing resize
	  on the toggle rather then the clock label actually
	  does a resize of the applet.

==================== 2.3.7 ====================

Tue Aug 19 16:39:45 2003  George Lebl <jirka@5z.com>

	* clock.c: To fix #110005 and #120188 remember the last requisition
	  and only request larger size.  That way we won't jump around all
	  the time with proportional fonts.  When options or font changes,
	  then we start over.  Also add an alignment in between the label
	  and the toggle, this way the panel won't get size allocated
	  all the time as the resizes from setting the label will stop at
	  the button.

==================== 2.3.6.2 ====================

==================== 2.3.6.1 ====================

==================== 2.3.6 ====================

Wed Jul 30 17:25:16 2003  George Lebl <jirka@5z.com>

	* clock.c: the calendar window now DOCK to fix #118366 since we really
	  are a dock type window since we are protruding from a panel.  Also
	  fix #118421 to fix positioning on xinerama displays to not go
	  accross monitors (and thus possibly offscreen)

==================== 2.3.4.1 ====================

2003-07-21  Dennis Cranston <dennis_cranston at yahoo com>

	* clock.c:  HIGify widget padding between dialog vbox and action area.

==================== 2.3.4 ====================

2003-07-09  Christian Neumair  <chris@gnome-de.org>

	* clock.schemas.in: Changed some strings, #117050.

Wed Jul 02 16:57:16 2003  George Lebl <jirka@5z.com>

	* clock.c: properly unref the gconf client when done with it

Wed Jul 02 14:17:59 2003  George Lebl <jirka@5z.com>

	* clock.c: the calendar window is of type UTILITY (which it is, and
	  thus should skip the windowlist).  Also if you would manage to
	  close the window by some chance anyway, the toggle button is
	  toggled correctly.  Fixes #116382

==================== 2.3.3.3 ====================

==================== 2.3.3.2 ====================

2003-07-01  Carlos Garnacho Parro  <garnacho@tuxerver.net>

	* clock.c: (config_date): made it to run time-admin from 
	the gnome-system-tools too 

Mon Jun 30 14:48:42 2003  George Lebl <jirka@5z.com>

	* clock.c: de-sensitize options in the config dialogue box, if those
	  settings are not in fact writable

2003-06-24  Mariano Suárez-Alvarez <msuarezalvarez@arnet.com.ar>

	* GNOME_ClockApplet.xml: HIGify the applet menu.
	Fixes bug #115809

==================== 2.3.3.1 ====================

==================== 2.3.3 ====================

2003-05-21  Leena Gunda  <leena.gunda@wipro.com>

	* applets/clock/clock.c:
	Add the "About" dialog widget as a member to ClockData struct.
	(display_about_dialog): use the member to hold the dialog widget.
	(destroy_clock): destroy the "About" dialog if present while
	deleting the applet. Fixes bug #112983

2003-05-08  Dennis Cranston <dennis_cranston at yahoo com>

	* clock.c:  The clock type label should not be bolded. Also,
	action_area padding.
	
2003-05-08  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: re-instate some authors who were mysteriously
	deleted.

2003-05-08  Mark McLoughlin  <mark@skynet.ie>

	* GNOME_ClockApplet_Factory.server.in.in: remove the .so
	suffix from the shlib location.

2003-04-16  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (properties_response_cb):
	Remove calls to gnome_program_init. Because we're using the
	global help files location I don't think its needed.

2003-04-15  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: expand to occupy the full panel width and
	move the tooltip from the PanelApplet to the toggle
	button so that PanelApplet doesn't take focus. Allows
	clicking on the edge of the panel to activate the
	button.

2003-04-08  Dennis Cranston <dennis_cranston at yahoo.com>

	* clock.c:  HIGify the preferences dialog.
	* GNOME_ClockApplet.xml:  Add icon for adjust date & time 
	popup menu item.
	
2003-02-17  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: add support for the GCONF_SCHEMAS_INSTALL
	conditional and the GCONF_SCHEMA_FILE_DIR variable.

2003-01-30  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: remove clock.h.

2003-01-27  Mark McLoughlin  <mark@skynet.ie>

	Add popup calendar and time configuration to clock applet.
	Slightly re-worked version of Havoc's patch. #85723.

	* GNOME_ClockApplet.xml: add "Adjust Date & Time" item.

	* clock.c: add support for time configuration tool and
	calendar popup.

	* clock.schemas.in: add configuration tool preference.

2003-01-27  Mark McLoughlin  <mark@skynet.ie>

	* GNOME_ClockApplet_Factory.server.in.in,
	  Makefile.am: copy from gen_util and tweak.

	* clock.c: don't include clock.h.
	(clock_factory): add factory code to make this
	a shlib factory.

2003-01-23  Satyajit Kanungo  <satyajit.kanungo@wipro.com>

	* mailcheck.c : Replaced g_spawn_command_line_async with
	  egg_screen_execute_command_line_async() to execute the application
	  in the correct screen.
	  Added a new function applet_realized_cb() which will call the function
	  to check the mails only after the applet is realixed.
	  Fixes bug #104032

2003-01-10  Mark McLoughlin  <mark@skynet.ie>

	* GNOME_GenUtilApplet_Factory.server.in.in: remove
	the pager, tasklist and showdesktop oaf_servers.

	* Makefile.am: remove all the pager, tasklist and
	showdesktop files.

	* main.c: (genutil_factory): upd.

	* GNOME_PagerApplet.xml, GNOME_ShowDesktopApplet.xml,
	  GNOME_TasklistApplet.xml, gnome-show-desktop.png,
	  pager.[ch], pager.glade, pager.schemas.in, print.xpm
	  printer.[ch] showdesktop.[ch], tasklist.[ch], tasklist.glade,
	  tasklist.schemas.in: remove these files.

2003-01-08  Mark McLoughlin  <mark@skynet.ie>

	* mailcheck.schemas.in: s/Remove/Remote/
	Patch from R.I.P. Deaddog. Fixes #102733.
	Approved by i18n and release teams.

2003-01-06  Mark McLoughlin  <mark@skynet.ie>

	Makes the password dialog not modal so that we don't
	have a locked up panel when getting the password.
	Fixes #102399. Based on patch from Balamurali Viswanathan.

	* mailcheck.c:
	(check_remote_mailbox): factor this out from
	check_mail_file_status().
	(password_response_cb): check the mailbox and
	destroy the dialog once we get the password.
	(get_remote_password): don't make the dialog modal.
	(check_mail_file_status), (fill_mailcheck_applet): upd.

2003-01-06  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (fill_clock_applet): remove the 4 pixel
	border around the clock as suggested by Gediminas.
	Fixes #97409.

2002-12-23  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (display_about_dialog):
	* mailcheck.c: (mailcheck_about): remove translations
	marks from around the copyright notices for the about
	dialogs. The container non-ascii characters and no longer
	need to be translated anyhow. Fixes #101796.

2002-12-20  Dennis Cranston <dennis_cranston@yahoo.com>

	* mailcheck.c: (mailcheck_about) fix previous commit 
	so the build doesn't fail.
	* clock.c: (display_about_dialog): mark for translation.

2002-12-20  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (display_about_dialog):
	* mailcheck.c: (mailcheck_about): fixup the
	references to the FSF. Fixes #101589 and #101591.

2002-12-19  Mark McLoughlin  <mark@skynet.ie>

	* help/*: remove these files.

2002-12-18  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: don't build help subdir. Its
	move to $(toplvel)/help/ now.

2002-12-17  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (update_timeformat): allow date and
	time in culturally specific orders. Fixes #100547.

2002-12-10  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (display_about_dialog):
	* mailcheck.c: (mailcheck_about):
	* pager.c: (display_about_dialog):
	* printer.c: (printer_about):
	* tasklist.c: (display_about_dialog): revert
        copyright changes until we decide on a format.

2002-12-04  Mark McLoughlin  <mark@skynet.ie>

	* mailcheck.c: (mailcheck_execute_shell): no whitespace
	before punctuation marks.

2002-12-02  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.schemas.in: put never, auto and always
	in quotes for clarity. #100049.

2002-11-29  Havoc Pennington  <hp@pobox.com>

	* tasklist.c (destroy_tasklist): free the tasklist struct
	(was leaked before, at least I think so)
	(fill_tasklist_applet): create an icon theme object for the
	tasklist.
	(fill_tasklist_applet): set an icon loader function for the
	tasklist.

2002-11-12  Arvind Samptur <arvind.samputur@wipro.com>
	* remote-helper.c: (fork_new_handler) poll for the
	pid to wrriten on to the pipe before allowing the 
	number of mails to be written on to the pipe.
	Fixes the problem of a SIGPIPE occuring causing the
	panel to crash and sometimes the number of mails
	having a junk value(which would be pid).
	Fixes #98001

2002-11-06  Andrew Sobala  <andrew@sobala.net>

	* clock.schemas.in, mailcheck.schemas.in, tasklist.c,
	tasklist.schemas.in: change some strings to comply with style
	guide

2002-11-03  Havoc Pennington  <hp@pobox.com>

	* pager.c (num_workspaces_value_changed): when changing number of
	workspaces, ask WM to do it, don't set stuff in gconf
	(workspace_name_edited): change workspace names on the X property, 
	don't set stuff in gconf

2002-11-01  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (applet_change_background): this callback
	takes a GdkPixmap *, not a filename.

2002-10-16  Mark McLoughlin  <mark@skynet.ie>

	* egg-screen-help.[ch], egg-screen-url.[ch]: sync
	with libegg.

	* clock.c, mailcheck.c, pager.c, showdesktop.c,
	  tasklist.c: use updated multiscreen help api.

2002-10-15  Padraig O'Briain <padraig.obriain@sun.com>

	* Makefile.am:
	Add CLEANFILES so that make clean deletes $(server_DATA) and
	$(server_DATA).in

2002-10-01  Yanko Kaneti <yaneti@declera.com>

	* clock.schemas.in: reorder elements so that it validates.

2002-10-01  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (update_timeformat): don't use leading 0
	for 12 hour timeformat. Fixes #94268.

2002-09-23  Havoc Pennington  <hp@redhat.com>

	* clock.c (destroy_clock): free the timeformat string

	* showdesktop.c: show desktop applet

	* GNOME_GenUtilApplet_Factory.server.in.in: add ShowDesktopApplet

2002-09-16  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am, multihead-hacks.h: kill
	multihead-hacks.h.

	* clock.c, mailcheck.c, pager.c, tasklist.c:
	Remove HAVE_GTK_MUTLIEHAD conditionals since
	we require gtk+ 2.1.0 now.

2002-09-16  Mark McLoughlin  <mark@skynet.ie>

	* pager.c: (applet_realized):
	* tasklist.c: (applet_realized): require
	libwnck HEAD.

2002-09-12  Mark McLoughlin  <mark@skynet.ie>

	* clock.c:
	(set_tooltip): impl method to create tooltips
	per aplet and set the tip.
	(update_clock), (display_about_dialog): don't
	try and refer to a panel symbol.

	* mailcheck.c: ditto. Fixes #92422.

2002-08-21  Havoc Pennington  <hp@redhat.com>

	* clock.schemas.in: translate the clock format

2002-08-21  Havoc Pennington  <hp@redhat.com>

	* clock.c (applet_change_background): memleak fix from 
	Arjan van de Ven <arjanv@redhat.com>

	* tasklist.c (applet_change_background): ditto

2002-09-11  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (update_timeformat): put the
	date in front of the time. Fixes #80675.

2002-09-05  Irene Ryan <irene.ryan@sun.com>

	* help/C/mailcheck/mailcheck.xml: updated to fix
	bug #91146
	* help/C/mailcheck/mailcheck-C.omf: updated to reflect
	new version number and date of manual
	
2002-05-20  Dennis Smit  <synap@yourbase.nl>

	* clock.schemas.in: Show seconds by default disabled.
	Fixes #88679.

2002-07-20  Dennis Smit  <synap@area101.penguin.nl>

	*  clock.c
	(display_properties_dialog): changed mnemonics for _UNIX
        to UNI_X as a fix for bug #88678

2002-08-12  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.glade: use a table instead of two
	hboxes to make sure the frame match up. #82048.

2002-08-11  Mark McLoughlin  <mark@skynet.ie>

	* mailcheck.schemas.in: s/mailcheck/Inbox Monitor/
	* pager.schemas.in: s/pager/Workspace Switcher/
	* tasklist.schemas.in: s/tasklist/Window List/
	(only in the descriptions of course, #83819.)

2002-08-08  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: add egg-screen-exec files to the build.

	* clock.c: (properties_response_cb), (display_help_dialog):
	* mailcheck.c: (phelp_cb), (help_callback):
	* pager.c: (response_cb), (display_help_dialog):
	* tasklist.c: (response_cb), (display_help_dialog):
	use egg_screen_display_desktop().

2002-08-05  Mark McLoughlin  <mark@skynet.ie>

	* GNOME_ClockApplet.xml: move Copy Date/Time to
	the top of the menu and add seperator. #89863.

2002-07-30  Mark McLoughlin  <mark@skynet.ie>

	* pager.c, tasklist.c: don't use methods from the
	libwnck multiscreen patch if they're not defined.

2002-07-29  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.c: (minimum_size_changed), (maximum_size_changed):
	Handle case where spin buttons have already been destroyed.
	Fixes #89027. Patch from Padraig O'Briain.

2002-07-11  Deepa Chacko Pillai <deepa.chacko@wipro.com>

	* remote-helper.c: Added check for waitpid ()
	returning -1 and errno EINTR. Fixes bug 88005.

2002-07-29  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.c: (fill_tasklist_applet): handle
	gconf errors with default values for min/max
	sizes. Fixes #88422.

2002-07-29  Mark McLoughlin  <mark@skynet.ie>

	* mailcheck.c: (mailcheck_get_animation_menu):
	unconditionally get the pixmap directory, fixes
	#88125.

2002-07-15  Mark McLoughlin  <mark@skynet.ie>

	* mailcheck.c:
	(mailcheck_execute_shell): add mailcheck arg and set
	screen upon which the dialog should realise.
	(after_mail_check), (mail_check_timeout),
	(exec_clicked_cmd): update for above change.

2002-05-21  Jorn Baayen  <jorn@nl.linux.org>

	* pager.glade: use GTK_SHADOW_IN for consistency

2002-05-20  Jorn Baayen  <jorn@nl.linux.org>

	* tasklist.glade: consistent spacing between the right two frames

2002-07-10  Mark McLoughlin  <mark@skynet.ie>

	* mailcheck.c:
	(mailcheck_execute_shell): impl using gspawn.
	(after_mail_check), (mail_check_timeout),
	(exec_clicked_cmd): use it here.
	(applet_load_prefs): "mail_file" is a string, not
	an int.

2002-07-02  Arvind Samptur   <arvind.samptur@wipro.com>

	* pager.c : (close_dialog) hack to get the
	workspace name changes reflected when the user
	closes the dialog without a button-press on the
	list. Fixes #84161.

2002-07-05 Pasupathi Duraisamy <pasupathi.duraisamy@wipro.com>

    	* mailcheck.c : Add atk descriptions. Fix bug#84099

2002-07-05  Joerg Wendland <joergland@debian.org>

	* mailcheck.c: (applet_load_prefs): Make sure we load up
	up the saved preferences. Fixes #84016.
	* mailcheck.schemas.in: Add missing schema.

2002-07-02  Christian Rose  <menthos@menthos.com>

	* clock.schemas.in: #78532 - s/GMT/UTC/ and
	s/Greenwich Mean Time/Universal Coordinated Time/.

2002-07-01  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.glade: #85344 - s/Tasklist/Window List/

2002-06-25  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: add multihead-hacks.h.

	* multihead-hacks.h: some hacks to reduce the number
	of HAVE_GTK_MULTIHEADs needed.

	* clock.c, mailcheck.c: make sure all dialogs realize on 
	the right screen.

	* pager.c: (applet_get_screen): impl helper method.
	(applet_realized): set the screen that the pager controls
	when the applet is realized.
	(response_cb), (fill_pager_applet), (display_help_dialog),
	(display_about_dialog), (display_properties_dialog): make
	sure all dialogs realize on the right screen.

	* tasklist.c: (applet_get_screen): impl helper method.
	(applet_realized): set the screen that the tasklist
	controls when the applet is realized.
	(response_cb), (fill_tasklist_applet), (display_help_dialog),
	(display_about_dialog), (display_properties_dialog): make
	sure all dialogs realize on the right screen.

2002-06-18  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: use $(prefix)/$(DATADIRNAME)/locale instead
	of $datadir/locale for locale directory location. Reported
	by Hidetoshit Tajima in #83623.

2002-06-07  Mark McLoughlin <mark@skynet.ie>

	* clock.c: (setup_gconf): store the notifies
	ids.
	(destroy_clock): remove the notifies when the
	applet is destroyed. Fixes crash when removing
	the applet.

2002-06-02  Havoc Pennington  <hp@pobox.com>

	* pager.glade: revert one of Rajkumar's changes to strings
	in the glade file (mnemonic for "show only the current workspace")
	to save i18n effort

2002-05-21  Rajkumar Sivasamy  <rajkumar.siva@wipro.com>

	* pager.c: Added tooltip for the applet.
	* pager.glade: Accessible description, tooltip and atk 
	relation is set for the components in preferences dialog.
	Default button to be activated on pressing enter key
	
2002-06-01  Kjartan Maraas  <kmaraas@gnome.org>

	* pager.schemas.in: Fix a typo.
	* tasklist.schemas.in: Same here.
	
2002-05-28  Satyajit Kanungo  <satyajit.kanungo@wipro.com>

	* clock.c: help callback modified .
	* pager.c: help callback added for the help button in preference
	  dialog box. help Callback modified and Error handling put.	

	* mailcheck.c : help button added to the preference dialog box 
	  and help callback is linked to the button.
	* tasklist.c: help callback added for the help button in the preference 
	  dialog box.
	* tasklist.glde, pager.glade - response id added for help buttons.
	* Makefile.am : DADADIR, LIBDIR,SYSCONFDIR,and PREFIX passed to the program.
	  to be used in program_init() 

2002-05-24  Akira TAGOH  <tagoh@gnome.gr.jp>

	* clock.c (update_timeformat): need to convert UTF-8 to the locale
	encoding (Bug#80539).
	(update_clock): ditto.
	(copy_time): ditto.
	(copy_date): ditto.

2002-05-21  Eric Baudais  <baudais@okstate.edu>

	* help/C/mailcheck/mailcheck.xml: Updated the help to the new UI.
	* help/C/mailcheck/figures/mailcheck-properties-mailcheck.png: Updated 
	the screenshot.
	* help/C/mailcheck/figures/mailcheck-properties-mailbox.png: Updated 
	the screenshot.

2002-05-21  Eric Baudais  <baudais@okstate.edu>
	
	* help/C/mailcheck/mailcheck-C.omf: Updated the OMF file to the 
	Scrollkeeper DTD.

2002-05-21  Thomas Vander Stichele <thomas@apestaart.org>

        * tasklist.c: 
          - fixed minimum_size and maximum_size for vertical panels
          - added code to do the logical thing when a panel's orientation 
            gets changed
          - use _size everywhere

2002-05-20  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: generate .schemas from .schemas.in.

	* clock.schemas.in:
	* mailcheck.schemas.in:
	* pager.schemas.in:
	* tasklist.schemas.in: rename from *.schemas.

2002-05-16  Havoc Pennington  <hp@pobox.com>

	* pager.c (update_workspaces_model): remove call to
	wnck_workspace_get which appears to have gone away.

2002-05-14  Anders Carlsson  <andersca@gnu.org>

	* pager.c: (fill_pager_applet):
	* tasklist.c: (fill_tasklist_applet):
	Use wnck_screen_get_default () instead of wnck_screen_get (0).
	
2002-05-13  Deepa Natarajan <deepa.natarajan@wipro.com>

	* GNOME_ClockApplet.xml, GNOME_MailCheckApplet.xml
	GNOME_PagerApplet.xml, GNOME_TasklistApplet.xml:
	added mnemonics for the popup menu.

2002-05-13  Dennis Cranston <dennis_cranston@yahoo.com>
	* mailcheck.c, clock.c:  "About..." dialog fixes -- change
	the names to match that in the "Add to panel" menu.  Also,
	add an icon for the Inbox Monitor.

	* pager.c:  "About..." dialog fixes -- correct
	grammar errors in the description field.(bug #80071)

2002-05-11  Thomas Vander Stichele <thomas@apestaart.org>

        * tasklist.c: implemented minimum_size and 
	  maximum_size preferences
          using GConf keys and updates to libwnck
        * tasklist.glade: added configuration spinbuttons
          for min/max size
        * tasklist.schema: added GConf keys

2002-05-06  Martin Hostettler <textshell@neutronstar.dyndns.org>

	* pager.glade, pager.schema, pager.glade: Made rows in config
	dialog change to cols in vertical orientation

2002-04-25  Arvind Samptur <arvind.samptur@wipro.com>
	* tasklist.c: (display_about_dialog) typo error in the 
	message.(#79707)

2002-05-09  Deepa Natarajan <deepa.natarajan@wipro.com>

	* mailcheck.c: set atk name, description and relation. 
	set Close as the default button. set mnemonics for label
	and check boxes.
 
2002-05-01  Anders Carlsson  <andersca@gnu.org>

	* pager.glade: Remove rules hint from tree view. 
	Fixes #80469.

2002-04-29  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* mailcheck.schemas: Fix a key to use underscore.

2002-04-20  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* mailcheck.c: (got_remote_answer), (set_mailbox_selection),
	(fill_mailcheck_applet):
	Real fix for #78182: First disable automatic updating,
	then show the dialog.
	Add some tooltips if the status is not updated.

2002-04-17  Arvind Samptur  <arvind.samptur@wipro.com>

	* mailcheck.c: (got_remote_answer): removed model message 
	dialog. (#78182)
	
2002-04-17  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am, handlebin.[ch]: kill FooHandle.

	* tasklist.c: (applet_change_orient), (applet_size_request),
	(fill_tasklist_applet): kill handle and set HAS_HANDLE
	flag on the applet.

2002-04-15  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (display_properties_dialog): use CET instead
	of GMT. (#78532)

	* tasklist.c: (fill_tasklist_applet): fix initial orientation
	of handle (#78544)

2002-04-15  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (add_atk_relation), (display_properties_dialog):
	applied AtkRelation patch from pasupathi.duraisamy@wipro.com.
	Fixes #74748.

2002-04-13  Alexander Larsson  <alla@lysator.liu.se>

	* tasklist.c:
	Set size hints when size_allocating frame.

2002-04-12  Mark McLoughlin  <mark@skynet.ie>

	* pager.c: (display_properties_dialog): fix warning.

2002-04-10  Havoc Pennington  <hp@pobox.com>

        * handlebin.h, handlebin.c: cheesy container based on GtkFrame
	that puts a handle grip next to its child
	
	* tasklist.c: put it in the above container, so it has a handle
	grip

2002-04-11  Mikael Hallendal  <micke@codefactory.se>

	* help/C/mailcheck/mailcheck.xml: fixed typo causing the document
	  to not be rendered.

2002-04-06  Gediminas Paulauskas <menesis@delfi.lt>

	* clock.c: Add "Show seconds" option (#75108), implement seconds for
	normal time and show 1/100s of internet time only when option is
	enabled, fix updating intervals.
	Make clock updating more efficient.
	Move Internet & UNIX time inside Clock type radio group to make
	prefs dialog more easy to use.
	Fix spacing in prefs and applet
	(this resolves last remaining bits of #72201)

	* clock.schemas: add show_seconds option

2002-04-02  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (fill_clock_applet): add padding around clock (76948)

2002-03-29  Mark McLoughlin  <mark@skynet.ie>

	* GNOME_ClockApplet.xml, GNOME_MailCheckApplet.xml:
	  GNOME_PagerApplet.xml, GNOME_TasklistApplet.xml,
	  clock.c, mailcheck.c, pager.c, pager.glade,
	  tasklist.c, tasklist.glade: use 'Preferences' instead
	of 'Properties' for applets (76823).

2002-03-28  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: install mailcheck.soundlist. Patch from
	Benedikt Roth.

2002-03-28  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* mailcheck.c: (get_remote_password), (got_remote_answer),
	(check_mail_file_status), (after_mail_check), (mail_check_timeout),
	(exec_clicked_cmd), (create_mail_widgets),
	(make_check_widgets_sensitive), (reset_on_clicked_toggled),
	(auto_update_toggled), (mailcheck_properties_page),
	(applet_load_prefs):
	Re-enabled error dialog, ported to gtkdialog and fixed wording (#59271).
	Automatically focus the password entry.
	(Would be nice if enter would be the same as clicking the OK button...)
	Added ability to turn off automatic mail-checking
	and used it when an error occures.
	Removed double call to after_mail_checked()
	which lead to newmail_cmd beeing executed too often (#52924).
	Added preference option to reset the mail status and 
	thus stop the animation when clicking on the applet (#28987).

	* mailcheck.schemas:  Added new reset_on_clicked and auto_update keys
	* help/C/mailcheck/mailcheck.xml: Added some short notes on new
	preference options, probably the screenshot should be updated, too.

2002-03-27  Mark McLoughlin  <mark@skynet.ie>

	* pager.c: (display_properties_dialog):
	* tasklist.c: (display_properties_dialog): weak ref so
	we don't core if the window gets destroyed (74145)

2002-03-25  Pasupathi Duraisamy <pasupathi.duraisamy@wipro.com>

        * clock.c: Fix to provide default action for enter key in
        clock's preference dialog.
 
2002-03-22  Mark McLoughlin  <mark@skynet.ie>

	* clock.schemas, mailcheck.schemas, pager.schemas,
	  tasklist.schemas: use underscore instead of hyphen
	for all gconf keys ... this is te gconf convention.

	* clock.c,mailcheck.c, pager.c, tasklist.c: upd for 
	gconf key changes.

2002-03-09  Johan Dahlin  <jdahlin@telia.com>

	reviewed by Mark McLoughlin <mark@skynet.ie>

	* tasklist.c: Get rid of inline xml ui
	(fill_tasklist_applet): Call panel_applet_setup_menu_from_file
	instead of using inline xml so the menu items is translated
	correctly.

	* Makefile.am (ui_DATA): Add GNOME_TasklistApplet.xml

	* GNOME_TasklistApplet.xml: New file

2002-03-19  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.c: (display_help_dialog): update for new docs names
	(patch from John Fleck)

2002-03-16  Gediminas Paulauskas <menesis@delfi.lt>

	* clock.c:
	Set accessible description for clock, add accelerators for
	property labels (#74748, patch from pasupathi.duraisamy@wipro.com)
	Fixed clock to update at 0 seconds (#71039)
	Removed "Show date in tooltip" option, show it always (#73928).
	Determine if to show 12 or 24 hour clock from locale, not from
	translation (#57153).
	Applet is now made only of a label (it was packed into frame,
	alignment, and box).
	Add Dan Mueth as documenter, leave only George and me as authors.

2002-03-14  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* mailcheck.c: (get_remote_password), (mailcheck_load_animation),
	(animation_selected), (applet_load_prefs):
	Hide the password in the passwort dialog.
	Correctly load and save the preferences for animation and remote user.
	Correctly display the animation if there is mail.

	* mailcheck.schemas: Fix to correctly load/save preferences.
	* tasklist.schemas: Fix typo.

2002-03-12  Mark McLoughlin  <mark@skynet.ie>

	* pager.c: (display_help_dialog): update for new docs
	names (patch from John Fleck).

2002-03-10  Benedikt Roth  <Benedikt.Roth@gmx.net>

	reviewed by Mark McLoughlin <mark@skynet.ie>

	* clock.c: (display_about_dialog):
	* pager.c: (display_about_dialog):
	* tasklist.c: (display_about_dialog):
	Display translator credits and the applets logo.

	* mailcheck.c: (after_mail_check), (mailcheck_about):
	Display translator credits and the applets logo.
	Always show the current status of mails in a tooltip.

2002-03-10 John Fleck <jfleck@inkstain.net>

	added:
	* help/C/workspace-switcher/Makefile.am, workspace-switcher-C.omf,
	legal.xml, workspace-switcher.xml, figures/workspacelist_applet.png
	* help/C/window-list/Makefile.am, legal.xml, window-list.xml,
	window-list-C.omf, figures/window_list_applet.png, window_list_group.png
	changed:
	help/Makefile.am

2002-03-10  Havoc Pennington  <hp@pobox.com>

	* pager.c: init num_rows to 1 not 2, #71689

	* pager.schemas: default num_rows to 1 not 2

2002-03-10  Havoc Pennington  <hp@pobox.com>

	* pager.c (fill_pager_applet): print out gconf errors rather than 
	silently dumping them leaving people wondering what happened.

	* pager.glade: make max rows on spin button match max in the code.

	* pager.c (num_rows_changed): if someone sets 0 or negative pager
	rows, force the value back to 1. Also set sane maximum value.
	#70406

2002-03-10  Havoc Pennington  <hp@pobox.com>

	* pager.c (setup_dialog): someone did not mean "connect_swapped"
	even though they typed it. ;-) #71395

2002-03-08  Gediminas Paulauskas <menesis@delfi.lt>

	* tasklist.glade, pager.glade: use Close button instead of Done

2002-03-08  Gediminas Paulauskas <menesis@delfi.lt>

	* clock.c: remove tooltip if "Show date in tooltip" option is unset
	(fixes #73547)

2002-03-05  Seth Nickell  <snickell@stanford.edu>

	* GNOME_GenUtilApplet_Factory.server.in.in:

	Put in "Internet" category. (cleared with translators)

2002-03-04  Mark McLoughlin  <mark@skynet.ie>

	* main.c: (genutil_factory): kill debug.

2002-03-03  Gediminas Paulauskas <menesis@delfi.lt>

	Applied patch by Shivram U <shivaram.upadhyayula@wipro.com>
	to fix #72167

	* tasklist.c (destroy_tasklist) : remove the gconf client listeners
	when the tasklist widget is destroyed.
	* pager.c (destroy_pager) : added the same fix when the pager widget
	is destroyed
 
2002-03-03  Gediminas Paulauskas <menesis@delfi.lt>

	* clock.c: hour_format is of type int, was bool, so now it is
	remembered. Ensure we have 12/24 even when there was no error
	getting from gconf. Should fix #73126.

2002-02-25  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: define deprecated flags here.

	* clock.c: kill them from here.

	* mailcheck.c: remove deprecated crap.

2002-02-25  Anders Carlsson  <andersca@gnu.org>

	* clock.c (fill_clock_applet): Fix build.

2002-02-25  Gediminas Paulauskas <menesis@delfi.lt>

	* clock.c: don't use deprecated things, #define *_DISABLE_DEPRECATED

2002-02-23  Gediminas Paulauskas <menesis@delfi.lt>

	Properties now work.
	
	* clock.c: move preferences to gconf, made properties dialog
	instant-apply.
	* clock.schemas: new file for clock properties.
	* Makefile.am: install clock.schemas

2002-02-23  Gediminas Paulauskas <menesis@delfi.lt>

	* clock.c: make tooltip work. Convert everything we get from strftime
	to UTF-8, so copy date works right.
	* tasklist.c: remove duplicate setup_gconf call

2002-02-23  Kjartan Maraas  <kmaraas@gnome.org>

	* tasklist.glade: Don't translate the widget label.
	* pager.glade: Same here.
		
Fri Feb 22 18:50:04 2002  George Lebl <jirka@5z.com>

	* mailcheck.c: compile warning fix

	* pager.c: when the setup window is closed by the WM, only hide it,
	  should solve some crashes

2002-02-22  Kjartan Maraas   <kmaraas@gnome.org>

	* tasklist.glade: s/workspaces/workspace in a string.
	
2002-02-22  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.c: (display_all_workspaces_changed),
	(get_grouping_type), (group_windows_changed),
	(move_unminimized_windows_changed), (fill_tasklist_applet):
	some sanity check on gconf notify handlers to prevent core
	dumps when removing the applet.

2002-02-21  Kjartan Maraas  <kmaraas@gnome.org>

	* GNOME_GenUtilApplet_Factory.server.in: Mark category names
	for translation.
	
2002-02-19  Kevin Vandersloot <kfv101@psu.edu>

        * mailcheck.c: Port the prefs dialog to GtkDialog and make
        it instant apply

        * Makefile.am: remove the -I{includedir}

2002-02-17  Alexander Larsson  <alla@lysator.liu.se>

	* tasklist.c:
	(tasklist_update): 
	Call wnck_tasklist_set_switch_workspace_on_unminimize().
	
2002-02-17  Alexander Larsson  <alla@lysator.liu.se>

	* tasklist.glade:
	* tasklist.scemas:
	Now has never, always or auto window grouping.

2002-02-17  Kjartan Maraas  <kmaraas@gnome.org>

	* printer.c: Remove deprecated calls to functions
	gtk_widget_push|pop_visual().
	
2002-02-16  Kjartan Maraas  <kmaraas@gnome.org>

	* GNOME_ClockApplet.xml: Move the xml menu structure out into a file.
	* GNOME_MailCheckApplet.xml: Same.
	* GNOME_PagerApplet.xml: Same.
	* clock.c: Hook it up.
	* mailcheck.c: Same.
	* pager.c: Same.
	* Makefile.am: Here too.
	
2002-02-15  Seth Nickell  <snickell@stanford.edu>

	* GNOME_GenUtilApplet_Factory.server.in.in:

	Move the clock into the new accessories category.

2002-02-14  Seth Nickell  <snickell@stanford.edu>

	* GNOME_GenUtilApplet_Factory.server.in.in:

	Add better descriptions.
	
	* pager.c: (display_about_dialog):
	* pager.glade:

	Use "Workspace Switcher", not "Workspace List",
	and remove unnecessary verbosity.

2002-02-14  Kjartan Maraas  <kmaraas@gnome.org>

	* pager.c: #include <config.h>
	
2002-02-14  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: build applet with -avoid-version -module.

2002-02-14  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (display_help_dialog):
	* mailcheck.c: (help_callback):
	* pager.c: (display_help_dialog):
	* tasklist.c: (display_help_dialog): hook up gnome_help
	for all of these.

2002-02-13  Mark McLoughlin  <mark@skynet.ie>

	* pager.c, pager.glade, tasklist.c, tasklist.glade: Finish of
	the string changes.

	"Pager" -> "Workspace List"
	"Tasklist" -> "Window List"

2002-02-13  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: define GNOME_ICONDIR here.

2002-02-12  Kjartan Maraas  <kmaraas@gnome.org>

	* GNOME_GenUtilApplet_Factory.server.in.in: Mark strings for l10n.
	
2002-02-11  Kjartan Maraas  <kmaraas@gnome.org>

	* tasklist.c: #include <config.h>
	
2002-02-09  Mark McLoughlin  <mark@skynet.ie>

	* tasklist.c: (fill_tasklist_applet): update for
	panel_applet_set_expand_flags change.

2002-02-09  Mark McLoughlin  <mark@skynet.ie>

	* GNOME_GenUtilApplet_Factory.server.in.in: move to Vertigo namespace.

	* main.c: update for factory macro change.

Wed Feb 06 10:01:46 2002  George Lebl <jirka@5z.com>

	* clock.c, mailcheck.c, pager.c, tasklist.c: Get initial values
	  for size and orient rather then just using defaults.  Background
	  still needs sorting out.

2002-02-02  Seth Nickell  <snickell@stanford.edu>

	* GNOME_GenUtilApplet_Factory.server.in.in:

	More funky renaming.

2002-01-31  Mark McLoughlin  <mark@skynet.ie>

	* clock_applet.desktop:
	* mailcheck_applet.desktop:
	* printer.desktop: remove, not needed anymore.

2002-01-30  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: update for AM_GCONF_SOURCE_2.

2002-01-28  Glynn Foster  <glynn.foster@sun.com>

	* clock.c, remote-helper.c, tasklist.c: Remove some 
	unused variables

2002-01-19  Seth Nickell  <snickell@stanford.edu>

	* GNOME_GenUtilApplet_Factory.server.in.in:

	Panel apparently doesn't like things to not
	have a Category and refuses to add them (though
	it shows them in the tree heirarchy OK...go figure).
	Put in utilities until we sort everything.

2002-01-19  Seth Nickell  <snickell@stanford.edu>

	* GNOME_GenUtilApplet_Factory.server.in.in:

	Rename some applets. Notably "Tasklist" and "Pager"
	to "Window List" and "Workspace List", respectively.
	Nils suggests we might try "Window Bar".

2002-01-19  Seth Nickell  <snickell@stanford.edu>

	* GNOME_GenUtilApplet_Factory.server.in.in:

	Call the clock applet "Clock". Don't put it in a category...
	At least not a "Clocks" category, that's just asking for more
	crack-rock clocks to be written :-)

2002-01-16  Richard Hult  <rhult@codefactory.se>

	* clock.c (create_computer_clock_widget): Make the time/date be
	centered.

2002-01-13  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	Add TASKLIST_GLADEDIR, tasklist.schemas and tasklist.glade

	* tastklist.glade, tasklist.schemas:
	New files.

	* pager.c:
	Set up gconf before reading values to avoid tiny race.
	Handle workspaces being renamed.

	* tasklist.c:
	Add properties dialog.

2002-01-13  Alexander Larsson  <alla@lysator.liu.se>

	* pager.c (num_workspaces_value_changed):
	Change gconf key to number_of_workspaces.

2002-01-13  Alexander Larsson  <alla@lysator.liu.se>

	* pager.glade:
	Hook up the workspaces part of the properties dialog.
	This needs some loving in gnome-settings-daemon to work.

2002-01-12  Alexander Larsson  <alla@lysator.liu.se>

	* pager.c:
	Hook up more preferences.	

	* pager.glade:
	Set id of help and done button.

2002-01-12  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	Add gladefile and schemas file for pager.

	* pager.c:
	First cut at the properties dialog.

	* pager.glade:
	* pager.schemas:
	New files.

Fri,  4 Jan 2002 22:28:51 -0500  Frank Belew <frb@ximian.com>

        * Makefile.am: remove -I$(includedir), bad things happen when
          prefix is the same as gnome1 and that gets added so early on the
          list

2002-01-02  Kevin Vandersloot <kfv101@psu.edu>

	* mailcheck.c: initial port to new api.

	* GNOME_GenUtil....server.in.in:
	* main.c:
	Add mailcheck applet to these

2001-12-17  Mark McLoughlin  <mark@skynet.ie>

	* clock.c: (fill_clock_applet):
	* clock.h:
	* main.c: (genutil_factory):
	* pager.c: (fill_pager_applet):
	* pager.h:
	* tasklist.c: (fill_tasklist_applet):
	* tasklist.h:
	update for panel-applet api changes.

2001-12-17  Mark McLoughlin  <mark@skynet.ie>

	* ChangeLog: copied from .. preserving history.

2001-12-14  Alex Larsson  <alexl@redhat.com>

	* gen_util/tasklist.c (applet_change_background):
	Handle background changes. This doesn't change the color of the
	buttons right now, since we would need the whole style for that.
	But it does handle the part of the tasklist that is empty when
	all the buttons fit on the tasklist.

2001-12-14  Alex Larsson  <alexl@redhat.com>

	* gen_util/clock.c:
	Handle background color changes.

2001-12-14  Mark McLoughlin  <mark@skynet.ie>

	* gen_util/clock.c: update for panel-applet
          GNOME_Vertigo namespace changes.

2001-12-08  Richard Hult  <rhult@codefactory.se>

	* gen_util/clock.c (computer_clock_update_func): Convert time/date
	string to utf-8 before setting the label text.

2001-12-04  Alex Larsson  <alexl@redhat.com>

	* gen_util/GNOME_GenUtilApplet_Factory.server.in.in:
	* gen_util/tasklist.[ch]:
	* applets/gen_util/Makefile.am:
	New tasklist implementation using libwnck.

	* applets/gen_util/pager.c:
	Fixed copyright

2001-11-30  Mark McLoughlin  <mark@skynet.ie>

	* gen_util/clock.c: (make_clock_applet): update for
	applet api changes.

	* gen_util/pager.c: (make_pager_applet): ditto.

2001-11-27  Mark McLoughlin  <mark@skynet.ie>

	* gen_util/Makefile.am: build against ../../libpanel-applet.

2001-11-26  Mark McLoughlin  <mark@skynet.ie>

	* gen_util/Makefile.am: add
	  GNOME_GenUtilApplet_Factory.server.in.in to EXTRA_DIST.

2001-11-23  Mark McLoughlin  <mark@skynet.ie>

	* gen_util/GNOME_GenUtilApplet_Factory.server.in.in: add
	"panel:icon" and "panel:category" attributes.

2001-11-23  Alexander Larsson  <alla@lysator.liu.se>

	* gen_util/Makefile.am:
	* gen_util/clock.[ch]: 
	* gen_util/main.c:
	Convert to new applet API and gnome 2.

	* gen_util/GNOME_GenUtilApplet_Factory.server.in.in:
	New oaf file for the applets.

2002-04-25  Arvind Samptur <arvind.samptur@wipro.com>
	* tasklist.c: (display_about_dialog) typo error in the 
	message.(#79707)

